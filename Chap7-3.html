<!DOCTYPE html><html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    
    <title>Chap7-3</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" rel="stylesheet"/> 
    
    <link href="page.css" rel="stylesheet"/><link href="markdown.css" rel="stylesheet"/><link href="nav.css" rel="stylesheet"/><link href="header.css" rel="stylesheet"/><link href="footer.css" rel="stylesheet"/>
    
</head>

<body>


    <header>
<p><a href="index.html">Home</a></p>
    </header>



    <nav>
<p><a id="settingsopenbutton">&#9728;</a><a href="#top">&#9650;</a><a href="#bottom">&#9660;</a></p><div id="settingsmenubg"><p><div id="settingsmenu"> <a id="settingsclosebutton">&#10006;</a> <a id="changethemebutton">Set Light Theme</a> <a id="loosepaddingbutton">&#8592; &#8594;</a> <a id="tightpaddingbutton">&#8594; &#8592;</a> </div></p></div>
    </nav>


    <article class="markdown">
        <a id="top"></a>
<table><thead id="table-collapse-toggle-0" class="collapsible collapsed" onclick="collapse_table('0')"><tr><th> Table of Contents </th></tr></thead><tbody id="collapsible-table-0" class="invisible"><tr><td><div class="toc"><p>1. <a href="#regular-expressions">Regular Expressions</a></p></div></td></tr></tbody></table><h1 id="regular-expressions">Regular Expressions</h1><p>지금까지 봤던 <code class="inline-code-span">Inductive</code> 예제들은 너무 시시했습니다. <code class="inline-code-span">Fixpoint</code>로 정의한 <code class="inline-code-span">le</code>, <code class="inline-code-span">ev</code>와 큰 차이가 없었어요. 그래서 이번에는 <code class="inline-code-span">Inductive</code>를 이용해서 정규표현식을 정의해보겠습니다.</p><blockquote>정규표현식이 뭔지 모르시는 분들은 이 단원은 넘어가도 무방합니다. </blockquote><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Inductive</span><span class="color-white"> reg_exp (</span><span class="color-gold">T</span> <span class="color-white">:</span> <span class="color-gold">Type</span><span class="color-white">) </span><span class="color-white">:</span> <span class="color-gold">Type</span> <span class="color-white">:=</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">EmptySet</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">EmptyStr</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">Char</span><span class="color-white"> (t </span><span class="color-white">:</span> <span class="color-gold">T</span><span class="color-white">)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">App</span><span class="color-white"> (r1 r2 </span><span class="color-white">:</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span><span class="color-white">)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">Union</span><span class="color-white"> (r1 r2 </span><span class="color-white">:</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span><span class="color-white">)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">Star</span><span class="color-white"> (r </span><span class="color-white">:</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">EmptySet</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">}</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">EmptyStr</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">}</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">Char</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">} _</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">App</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">} _ _</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">Union</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">} _ _</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">Star</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">} _</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(0)">Copy</button></pre><p>먼저 정규표현식 자체를 정의했습니다. <code class="inline-code-span">T</code>는 <code class="inline-code-span">Char</code>, 즉 각 글자들의 type입니다.</p><ul><li><code class="inline-code-span">EmptySet</code>: 아무 문자열에도 대응되지 않습니다.</li><li><code class="inline-code-span">EmptyStr</code>: <code class="inline-code-span">[]</code>, 즉 빈 문자열에 대응됩니다.</li><li><code class="inline-code-span">Char t</code>: 한 글자짜리 문자열입니다.</li><li><code class="inline-code-span">App r1 r2</code>: 유효한 문자열 2개의 합 (concatenation)입니다.</li><li><code class="inline-code-span">Union r1 r2</code>: 정규표현식의 <code class="inline-code-span">|</code>에 해당됩니다.</li><li><code class="inline-code-span">Star r</code>: 정규표현식의 <code class="inline-code-span">*</code>에 해당됩니다.</li></ul><p><a id="yogi"></a></p><p>여기서 사용한 <code class="inline-code-span">Inductive</code>는 <code class="inline-code-span">ev</code>, <code class="inline-code-span">le</code>를 정의할 때 사용한 <code class="inline-code-span">Inductive</code>보다는 <code class="inline-code-span">bool</code>, <code class="inline-code-span">bin</code>등을 정의할 때 사용한 <code class="inline-code-span">Inductive</code>에 가깝습니다. 즉, 7장에서 새로 본 <code class="inline-code-span">Prop</code>을 반환하는 <code class="inline-code-span">Inductive</code>가 아니고 <a href="Chap1-1.html#keywordinductive">옛날</a>에 Rust의 enum에 비유하면서 설명했던 그 <code class="inline-code-span">Inductive</code>에 가깝습니다.</p><p><a id="keywordreserved"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Reserved</span> <span class="color-gold">Notation</span> <span class="color-white">&quot;</span><span class="color-green">s =~ re</span><span class="color-white">&quot;</span><span class="color-white"> (at level </span><span class="color-gold">80</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Inductive</span><span class="color-white"> exp_match {</span><span class="color-gold">T</span><span class="color-white">} </span><span class="color-white">:</span><span class="color-white"> list </span><span class="color-gold">T</span> <span class="color-white">-&gt;</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span> <span class="color-white">-&gt;</span> <span class="color-gold">Prop</span> <span class="color-white">:=</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MEmpty</span> <span class="color-white">:</span> <span class="color-gold">[]</span> <span class="color-white">=~</span> <span class="color-gold">EmptyStr</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MChar</span><span class="color-white"> x </span><span class="color-white">:</span><span class="color-white"> [x] </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Char</span><span class="color-white"> x)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MApp</span><span class="color-white"> s1 re1 s2 re2
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">             (</span><span class="color-gold">H1</span> <span class="color-white">:</span><span class="color-white"> s1 </span><span class="color-white">=~</span><span class="color-white"> re1)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">             (</span><span class="color-gold">H2</span> <span class="color-white">:</span><span class="color-white"> s2 </span><span class="color-white">=~</span><span class="color-white"> re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">           <span class="color-white">:</span><span class="color-white"> (s1 </span><span class="color-white">++</span><span class="color-white"> s2) </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">App</span><span class="color-white"> re1 re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MUnionL</span><span class="color-white"> s1 re1 re2
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">                (</span><span class="color-gold">H1</span> <span class="color-white">:</span><span class="color-white"> s1 </span><span class="color-white">=~</span><span class="color-white"> re1)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">              <span class="color-white">:</span><span class="color-white"> s1 </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Union</span><span class="color-white"> re1 re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MUnionR</span><span class="color-white"> re1 s2 re2
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">                (</span><span class="color-gold">H2</span> <span class="color-white">:</span><span class="color-white"> s2 </span><span class="color-white">=~</span><span class="color-white"> re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">              <span class="color-white">:</span><span class="color-white"> s2 </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Union</span><span class="color-white"> re1 re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MStar0</span><span class="color-white"> re </span><span class="color-white">:</span> <span class="color-gold">[]</span> <span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Star</span><span class="color-white"> re)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MStarApp</span><span class="color-white"> s1 s2 re
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">                 (</span><span class="color-gold">H1</span> <span class="color-white">:</span><span class="color-white"> s1 </span><span class="color-white">=~</span><span class="color-white"> re)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">                 (</span><span class="color-gold">H2</span> <span class="color-white">:</span><span class="color-white"> s2 </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Star</span><span class="color-white"> re))
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code">               <span class="color-white">:</span><span class="color-white"> (s1 </span><span class="color-white">++</span><span class="color-white"> s2) </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Star</span><span class="color-white"> re)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code">  <span class="color-violet">where</span> <span class="color-white">&quot;</span><span class="color-green">s =~ re</span><span class="color-white">&quot;</span> <span class="color-white">:=</span><span class="color-white"> (exp_match s re)</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(1)">Copy</button></pre><p>다음으로는 각 정규표현식이 문자열과 대응되는 규칙을 정의했습니다. <code class="inline-code-span">[]</code>, <code class="inline-code-span">++</code> 등의 기호는 <a href="Chap3-2.html">이전</a>에 list를 정의하면서 봤으니, 기억이 안 나시는 분들은 참고해주세요.</p><p>각 규칙들을 자세히 뜯어보겠습니다. 먼저, <code class="inline-code-span">s =~ re</code>라는 기호를 정의했습니다. <code class="inline-code-span">s</code>라는 문자열이 <code class="inline-code-span">re</code>라는 정규표현식에 대응된다는 뜻입니다. <code class="inline-code-span">exp_match</code>의 정의 안에서 <code class="inline-code-span">~=</code> 기호를 사용하기 위해서 <code class="inline-code-span">Reserved</code>라는 keyword를 사용했습니다.</p><p>또한 <code class="inline-code-span">exp_match</code>의 type이 <code class="inline-code-span">list T -&gt; reg_exp T -&gt; Prop</code>이란 것도 주목할 필요가 있습니다. <code class="inline-code-span">exp_match</code>는 문자열과 정규표현식을 하나씩 받아서 둘이 대응이 되는지를 알려준다는 뜻입니다. <a href="#yogi">방금 전</a>에 분류한 거에 따르면 전자의 정의에 가깝죠.</p><ul><li><code class="inline-code-span">MEmpty</code><ul><li>빈 문자열은 <code class="inline-code-span">EmptyStr</code>에 대응됩니다.</li></ul></li><li><code class="inline-code-span">MChar x</code><ul><li><code class="inline-code-span">x</code> 한 글자로 이뤄진 문자열은 <code class="inline-code-span">Char x</code>에 대응됩니다.</li></ul></li><li><code class="inline-code-span">MApp s1 re1 s2 re2</code><ul><li><code class="inline-code-span">s1</code>이라는 문자열은 <code class="inline-code-span">re1</code>이라는 정규표현식에 대응되고, <code class="inline-code-span">s2</code>이라는 문자열은 <code class="inline-code-span">re2</code>이라는 정규표현식에 대응될 때,</li><li><code class="inline-code-span">s1 ++ s2</code>는 <code class="inline-code-span">App re1 re2</code>에 대응됩니다.</li></ul></li><li><code class="inline-code-span">MUnionL s1 re1 re2</code>, <code class="inline-code-span">MUnionR re1 s2 re2</code><ul><li><code class="inline-code-span">s1</code>이라는 문자열이 <code class="inline-code-span">re1</code>이라는 정규표현식에 대응되면 <code class="inline-code-span">s1</code>은 <code class="inline-code-span">Union re1 re2</code>에도 대응됩니다.</li><li><code class="inline-code-span">Union</code>은 교환법칙이 성립하는데, 그걸 표현하기 위해서 <code class="inline-code-span">MUnionL</code>과 <code class="inline-code-span">MUnionR</code>을 따로 정의했습니다.</li></ul></li><li><code class="inline-code-span">MStar0</code><ul><li>모든 정규표현식 <code class="inline-code-span">re</code>에 대해서, 빈 문자열은 <code class="inline-code-span">Star re</code>에 대응됩니다.</li></ul></li><li><code class="inline-code-span">MStarApp s1 s2 re</code><ul><li>문자열 <code class="inline-code-span">s1</code>이 정규표현식 <code class="inline-code-span">re</code>에 대응되고, <code class="inline-code-span">s2</code>가 <code class="inline-code-span">Star re</code>에 대응되면 <code class="inline-code-span">s1 ++ s2</code>는 <code class="inline-code-span">Star re</code>에 대응됩니다.</li><li>즉, <code class="inline-code-span">re</code>에 대응되는 문자열을 0번 이상 반복한 문자열은 <code class="inline-code-span">Star re</code>에 대응됩니다.</li></ul></li></ul><hr/><div class="align-center"><p><a href="index.html">메인으로 돌아가기</a></p></div><div class="align-left"><p>&lt;&lt; <a href="Chap7-2.html">Chap7-2. Using Evidence in Proofs</a></p></div><div class="align-right"><p>다음 글이 없습니다.</p></div><script>/*<![CDATA[*/
const fenced_code_block_contents = ["Inductive reg_exp (T : Type) : Type :=\n  | EmptySet\n  | EmptyStr\n  | Char (t : T)\n  | App (r1 r2 : reg_exp T)\n  | Union (r1 r2 : reg_exp T)\n  | Star (r : reg_exp T).\n\nArguments EmptySet {T}.\nArguments EmptyStr {T}.\nArguments Char {T} _.\nArguments App {T} _ _.\nArguments Union {T} _ _.\nArguments Star {T} _.", "Reserved Notation \"s =~ re\" (at level 80).\nInductive exp_match {T} : list T -> reg_exp T -> Prop :=\n  | MEmpty : [] =~ EmptyStr\n  | MChar x : [x] =~ (Char x)\n  | MApp s1 re1 s2 re2\n             (H1 : s1 =~ re1)\n             (H2 : s2 =~ re2)\n           : (s1 ++ s2) =~ (App re1 re2)\n  | MUnionL s1 re1 re2\n                (H1 : s1 =~ re1)\n              : s1 =~ (Union re1 re2)\n  | MUnionR re1 s2 re2\n                (H2 : s2 =~ re2)\n              : s2 =~ (Union re1 re2)\n  | MStar0 re : [] =~ (Star re)\n  | MStarApp s1 s2 re\n                 (H1 : s1 =~ re)\n                 (H2 : s2 =~ (Star re))\n               : (s1 ++ s2) =~ (Star re)\n\n  where \"s =~ re\" := (exp_match s re)."];

function copy_code_to_clipboard(index) {
    navigator.clipboard.writeText(fenced_code_block_contents[index]);
}/*]]>*/</script>
        <a id="bottom"></a>
    </article>




    <footer class="markdown">
<p><br/></p><p><br/></p><hr/><div class="align-center"><p>2021 ~ 2022 (c) Baehyunsol</p></div>
    </footer>


    <script src="colors.js"></script>

    
    <script src="nav.js"></script>
    
<script src="collapsible_tables.js"></script></body>

</html>