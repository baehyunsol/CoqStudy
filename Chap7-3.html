<!DOCTYPE html><html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    
    <title>Chap7-3</title>
    
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
    <!--<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" rel="stylesheet"/> -->
    
    <link href="page.css" rel="stylesheet"/><link href="markdown.css" rel="stylesheet"/><link href="nav.css" rel="stylesheet"/><link href="header.css" rel="stylesheet"/>
    
</head>

<body>


    <header>
<p><div class="topmenu deactivated"><a href="index.html">Home</a> <a href="index.html#index-by-chapter">단원별 목차</a> <a href="index.html#index-by-keyword">키워드 목차</a> <a href="Appendix.html">부록</a></div><div class="mobileview"><a id="navbutton">&#9776;</a></div></p>
    </header>



    <nav>
<p><a id="settingsopenbutton">&#9728;</a><a href="#top">&#9650;</a><a href="#bottom">&#9660;</a></p><div id="settingsmenubg"><p><div id="settingsmenu"> <a id="settingsclosebutton">&#10006;</a> <a id="changethemebutton">Set Light Theme</a> <a id="growhorizontalbutton">Grow Horizontally</a> <a id="shrinkhorizontalbutton">Shrink Horizontally</a> <a id="growfontbutton">Grow Font</a> <a id="shrinkfontbutton">Shrink Font</a> </div></p></div>
    </nav>


    <article class="markdown">
        <a id="top"></a>
<table><thead id="table-collapse-toggle-0" class="collapsible collapsed" onclick="collapse_table('0')"><tr><th>목차</th></tr></thead><tbody id="collapsible-table-0" class="invisible"><tr><td><div class="toc"><ol type="1"><li><a href="#regular-expressions">Regular Expressions</a><ol type="1"><li><a href="#reg_exp">reg_exp</a></li><li><a href="#exp_match">exp_match</a></li><li><a href="#활용">활용</a><ol type="1"><li><a href="#간단한-정규식-대응">간단한 정규식 대응</a></li><li><a href="#emptyset">EmptySet</a></li><li><a href="#remember"><code class="inline-code-span">remember</code></a></li></ol></li></ol></li></ol></div></td></tr></tbody></table><h1 id="regular-expressions">Regular Expressions</h1><p>지금까지 봤던 <code class="inline-code-span">Inductive</code> 예제들은 너무 시시했습니다. <code class="inline-code-span">Fixpoint</code>로 정의한 <code class="inline-code-span">le</code>, <code class="inline-code-span">ev</code>와 큰 차이가 없었어요. 그래서 이번에는 <code class="inline-code-span">Inductive</code>를 이용해서 정규표현식을 정의해보겠습니다.</p><blockquote>정규표현식이 뭔지 모르시는 분들은 이 단원은 넘어가도 무방합니다. </blockquote><h2 id="reg_exp">reg_exp</h2><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Inductive</span><span class="color-white"> reg_exp (</span><span class="color-gold">T</span> <span class="color-white">:</span> <span class="color-gold">Type</span><span class="color-white">) </span><span class="color-white">:</span> <span class="color-gold">Type</span> <span class="color-white">:=</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">EmptySet</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">EmptyStr</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">Char</span><span class="color-white"> (t </span><span class="color-white">:</span> <span class="color-gold">T</span><span class="color-white">)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">App</span><span class="color-white"> (r1 r2 </span><span class="color-white">:</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span><span class="color-white">)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">Union</span><span class="color-white"> (r1 r2 </span><span class="color-white">:</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span><span class="color-white">)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">Star</span><span class="color-white"> (r </span><span class="color-white">:</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">EmptySet</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">}</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">EmptyStr</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">}</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">Char</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">} _</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">App</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">} _ _</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">Union</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">} _ _</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-gold">Arguments</span> <span class="color-gold">Star</span><span class="color-white"> {</span><span class="color-gold">T</span><span class="color-white">} _</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(0)">Copy</button></pre><p>먼저 정규표현식 자체를 정의했습니다. <code class="inline-code-span">T</code>는 <code class="inline-code-span">Char</code>, 즉 각 글자들의 type입니다.</p><ul><li><code class="inline-code-span">EmptySet</code>: 아무 문자열에도 대응되지 않습니다.</li><li><code class="inline-code-span">EmptyStr</code>: <code class="inline-code-span">[]</code>, 즉 빈 문자열에 대응됩니다.</li><li><code class="inline-code-span">Char t</code>: 한 글자짜리 문자열입니다.</li><li><code class="inline-code-span">App r1 r2</code>: 유효한 문자열 2개의 합 (concatenation)입니다.</li><li><code class="inline-code-span">Union r1 r2</code>: 정규표현식의 <code class="inline-code-span">|</code>에 해당됩니다.</li><li><code class="inline-code-span">Star r</code>: 정규표현식의 <code class="inline-code-span">*</code>에 해당됩니다.</li></ul><p><a id="yogi"></a></p><p>여기서 사용한 <code class="inline-code-span">Inductive</code>는 <code class="inline-code-span">ev</code>, <code class="inline-code-span">le</code>를 정의할 때 사용한 <code class="inline-code-span">Inductive</code>보다는 <code class="inline-code-span">bool</code>, <code class="inline-code-span">bin</code>등을 정의할 때 사용한 <code class="inline-code-span">Inductive</code>에 가깝습니다. 즉, 7장에서 새로 본 <code class="inline-code-span">Prop</code>을 반환하는 <code class="inline-code-span">Inductive</code>가 아니고 <a href="Chap1-1.html#keywordinductive">옛날</a>에 Rust의 enum에 비유하면서 설명했던 그 <code class="inline-code-span">Inductive</code>에 가깝습니다.</p><h2 id="exp_match">exp_match</h2><p><a id="keywordreserved"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Reserved</span> <span class="color-gold">Notation</span> <span class="color-white">&quot;</span><span class="color-green">s =~ re</span><span class="color-white">&quot;</span><span class="color-white"> (at level </span><span class="color-gold">80</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Inductive</span><span class="color-white"> exp_match {</span><span class="color-gold">T</span><span class="color-white">} </span><span class="color-white">:</span><span class="color-white"> list </span><span class="color-gold">T</span> <span class="color-white">-&gt;</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span> <span class="color-white">-&gt;</span> <span class="color-gold">Prop</span> <span class="color-white">:=</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MEmpty</span> <span class="color-white">:</span> <span class="color-gold">[]</span> <span class="color-white">=~</span> <span class="color-gold">EmptyStr</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MChar</span><span class="color-white"> x </span><span class="color-white">:</span><span class="color-white"> [x] </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Char</span><span class="color-white"> x)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MApp</span><span class="color-white"> s1 re1 s2 re2
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">             (</span><span class="color-gold">H1</span> <span class="color-white">:</span><span class="color-white"> s1 </span><span class="color-white">=~</span><span class="color-white"> re1)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">             (</span><span class="color-gold">H2</span> <span class="color-white">:</span><span class="color-white"> s2 </span><span class="color-white">=~</span><span class="color-white"> re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">           <span class="color-white">:</span><span class="color-white"> (s1 </span><span class="color-white">++</span><span class="color-white"> s2) </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">App</span><span class="color-white"> re1 re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MUnionL</span><span class="color-white"> s1 re1 re2
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">                (</span><span class="color-gold">H1</span> <span class="color-white">:</span><span class="color-white"> s1 </span><span class="color-white">=~</span><span class="color-white"> re1)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">              <span class="color-white">:</span><span class="color-white"> s1 </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Union</span><span class="color-white"> re1 re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MUnionR</span><span class="color-white"> re1 s2 re2
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">                (</span><span class="color-gold">H2</span> <span class="color-white">:</span><span class="color-white"> s2 </span><span class="color-white">=~</span><span class="color-white"> re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">              <span class="color-white">:</span><span class="color-white"> s2 </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Union</span><span class="color-white"> re1 re2)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MStar0</span><span class="color-white"> re </span><span class="color-white">:</span> <span class="color-gold">[]</span> <span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Star</span><span class="color-white"> re)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">  <span class="color-white">|</span> <span class="color-gold">MStarApp</span><span class="color-white"> s1 s2 re
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">                 (</span><span class="color-gold">H1</span> <span class="color-white">:</span><span class="color-white"> s1 </span><span class="color-white">=~</span><span class="color-white"> re)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">                 (</span><span class="color-gold">H2</span> <span class="color-white">:</span><span class="color-white"> s2 </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Star</span><span class="color-white"> re))
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code">               <span class="color-white">:</span><span class="color-white"> (s1 </span><span class="color-white">++</span><span class="color-white"> s2) </span><span class="color-white">=~</span><span class="color-white"> (</span><span class="color-gold">Star</span><span class="color-white"> re)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code">  <span class="color-violet">where</span> <span class="color-white">&quot;</span><span class="color-green">s =~ re</span><span class="color-white">&quot;</span> <span class="color-white">:=</span><span class="color-white"> (exp_match s re)</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(1)">Copy</button></pre><p>다음으로는 각 정규표현식이 문자열과 대응되는 규칙을 정의했습니다. <code class="inline-code-span">[]</code>, <code class="inline-code-span">++</code> 등의 기호는 <a href="Chap3-2.html">이전</a>에 list를 정의하면서 봤으니, 기억이 안 나시는 분들은 참고해주세요.</p><p>각 규칙들을 자세히 뜯어보겠습니다. 먼저, <code class="inline-code-span">s =~ re</code>라는 기호를 정의했습니다. <code class="inline-code-span">s</code>라는 문자열이 <code class="inline-code-span">re</code>라는 정규표현식에 대응된다는 뜻입니다. <code class="inline-code-span">exp_match</code>의 정의 안에서 <code class="inline-code-span">~=</code> 기호를 사용하기 위해서 <code class="inline-code-span">Reserved</code>라는 keyword를 사용했습니다.</p><p>또한 <code class="inline-code-span">exp_match</code>의 type이 <code class="inline-code-span">list T -&gt; reg_exp T -&gt; Prop</code>이란 것도 주목할 필요가 있습니다. <code class="inline-code-span">exp_match</code>는 문자열과 정규표현식을 하나씩 받아서 둘이 대응이 되는지를 알려준다는 뜻입니다. <a href="#yogi">방금 전</a>에 분류한 거에 따르면 전자의 정의에 가깝죠.</p><ul><li><code class="inline-code-span">MEmpty</code><ul><li>빈 문자열은 <code class="inline-code-span">EmptyStr</code>에 대응됩니다.</li></ul></li><li><code class="inline-code-span">MChar x</code><ul><li><code class="inline-code-span">x</code> 한 글자로 이뤄진 문자열은 <code class="inline-code-span">Char x</code>에 대응됩니다.</li></ul></li><li><code class="inline-code-span">MApp s1 re1 s2 re2</code><ul><li><code class="inline-code-span">s1</code>이라는 문자열은 <code class="inline-code-span">re1</code>이라는 정규표현식에 대응되고, <code class="inline-code-span">s2</code>이라는 문자열은 <code class="inline-code-span">re2</code>이라는 정규표현식에 대응될 때,</li><li><code class="inline-code-span">s1 ++ s2</code>는 <code class="inline-code-span">App re1 re2</code>에 대응됩니다.</li></ul></li><li><code class="inline-code-span">MUnionL s1 re1 re2</code>, <code class="inline-code-span">MUnionR re1 s2 re2</code><ul><li><code class="inline-code-span">s1</code>이라는 문자열이 <code class="inline-code-span">re1</code>이라는 정규표현식에 대응되면 <code class="inline-code-span">s1</code>은 <code class="inline-code-span">Union re1 re2</code>에도 대응됩니다.</li><li><code class="inline-code-span">Union</code>은 교환법칙이 성립하는데, 그걸 표현하기 위해서 <code class="inline-code-span">MUnionL</code>과 <code class="inline-code-span">MUnionR</code>을 따로 정의했습니다.</li></ul></li><li><code class="inline-code-span">MStar0</code><ul><li>모든 정규표현식 <code class="inline-code-span">re</code>에 대해서, 빈 문자열은 <code class="inline-code-span">Star re</code>에 대응됩니다.</li></ul></li><li><code class="inline-code-span">MStarApp s1 s2 re</code><ul><li>문자열 <code class="inline-code-span">s1</code>이 정규표현식 <code class="inline-code-span">re</code>에 대응되고, <code class="inline-code-span">s2</code>가 <code class="inline-code-span">Star re</code>에 대응되면 <code class="inline-code-span">s1 ++ s2</code>는 <code class="inline-code-span">Star re</code>에 대응됩니다.</li><li>즉, <code class="inline-code-span">re</code>에 대응되는 문자열을 0번 이상 반복한 문자열은 <code class="inline-code-span">Star re</code>에 대응됩니다.</li></ul></li></ul><h2 id="활용">활용</h2><p>방금 한 정의를 이용해서 간단한 증명 몇가지를 해보겠습니다.</p><h3 id="간단한-정규식-대응">간단한 정규식 대응</h3><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Example</span><span class="color-white"> reg_exp_ex1 </span><span class="color-white">:</span><span class="color-white"> [</span><span class="color-gold">1</span><span class="color-white">] </span><span class="color-white">=~</span> <span class="color-gold">Union</span><span class="color-white"> (</span><span class="color-gold">Char</span> <span class="color-gold">1</span><span class="color-white">) (</span><span class="color-gold">Char</span> <span class="color-gold">2</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  apply (</span><span class="color-gold">MUnionL</span><span class="color-white"> [</span><span class="color-gold">1</span><span class="color-white">] (</span><span class="color-gold">Char</span> <span class="color-gold">1</span><span class="color-white">) (</span><span class="color-gold">Char</span> <span class="color-gold">2</span><span class="color-white">))</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> [1] =~ Char 1 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">MChar</span> <span class="color-gold">1</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-gold">Example</span><span class="color-white"> reg_exp_ex2 </span><span class="color-white">:</span><span class="color-white"> [</span><span class="color-gold">1</span><span class="color-white">; </span><span class="color-gold">2</span><span class="color-white">] </span><span class="color-white">=~</span> <span class="color-gold">App</span><span class="color-white"> (</span><span class="color-gold">Char</span> <span class="color-gold">1</span><span class="color-white">) (</span><span class="color-gold">Char</span> <span class="color-gold">2</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">  apply (</span><span class="color-gold">MApp</span><span class="color-white"> [</span><span class="color-gold">1</span><span class="color-white">] (</span><span class="color-gold">Char</span> <span class="color-gold">1</span><span class="color-white">) [</span><span class="color-gold">2</span><span class="color-white">] (</span><span class="color-gold">Char</span> <span class="color-gold">2</span><span class="color-white">))</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> [1] =~ Char 1 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">MChar</span> <span class="color-gold">1</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> [2] =~ Char 2 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">MChar</span> <span class="color-gold">2</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(2)">Copy</button></pre><p>비슷한 형태의 증명을 2가지 했습니다. 먼저, 증명해야하는 식의 모양을 <code class="inline-code-span">MUnionL</code>과 <code class="inline-code-span">MApp</code>의 형태로 바꿨습니다. <code class="inline-code-span">MUnionL</code>과 <code class="inline-code-span">MApp</code>의 인수는 전부 적었습니다. <code class="inline-code-span">MUnionL</code>은 정의에 <code class="inline-code-span">H1: s1 =~ re1</code>가 있죠? <code class="inline-code-span">exp_match</code>를 하나 더 보이라고 요구합니다. 그래서 <code class="inline-code-span">apply</code>를 한번 더 써서 증명했습니다. <code class="inline-code-span">MApp</code>은 요구하는 추가로 <code class="inline-code-span">exp_match</code>가 2개여서 2번 했습니다.</p><p>책에는 저 식들이 훨씬 더 축약된 형태로 나와있습니다. 예를 들면 10번 줄을 <code class="inline-code-span">apply (MApp [1]).</code>이라고만 적어도 동일한 과정으로 증명이 끝납니다. 혹은, 5번과 12번, 14번 줄을 <code class="inline-code-span">apply MChar.</code>라고만 적어도 증명이 동일하게 진행됩니다. 처음에는 책의 축약된 형태만 보고 한참을 헤맸는데 여러분은 저처럼 헤매지 말라고 축약되지 않은 형태로 적었습니다. 익숙해지면 축약된 형태로 적겠습니다.</p><h3 id="emptyset">EmptySet</h3><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> empty_is_empty </span><span class="color-white">:</span><span class="color-white"> forall </span><span class="color-gold">T</span><span class="color-white"> (s </span><span class="color-white">:</span><span class="color-white"> list </span><span class="color-gold">T</span><span class="color-white">)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">  <span class="color-white">~</span><span class="color-white"> (s </span><span class="color-white">=~</span> <span class="color-gold">EmptySet</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">T</span><span class="color-white"> s</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  unfold not</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">  inversion </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(3)">Copy</button></pre><p><code class="inline-code-span">exp_match</code>의 정의에는 <code class="inline-code-span">EmptySet</code>과 대응시키는 규칙이 정의가 안 돼 있습니다. <code class="inline-code-span">EmptySet</code>과 대응되는 문자열은 존재하지 않기 때문이죠. 그걸 증명했습니다. 지난번에 배웠듯 <code class="inline-code-span">inversion</code> tactic은 해당되지 않는 경우들을 전부 알아서 <code class="inline-code-span">discriminate</code>해주기 때문에 증명이 바로 끝닙니다.</p><h3 id="remember"><code class="inline-code-span">remember</code></h3><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> star_app</span><span class="color-white">:</span><span class="color-white"> forall </span><span class="color-gold">T</span><span class="color-white"> (s1 s2 </span><span class="color-white">:</span><span class="color-white"> list </span><span class="color-gold">T</span><span class="color-white">) (re </span><span class="color-white">:</span><span class="color-white"> reg_exp </span><span class="color-gold">T</span><span class="color-white">)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  s1 </span><span class="color-white">=~</span> <span class="color-gold">Star</span><span class="color-white"> re </span><span class="color-white">-&gt;</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  s2 </span><span class="color-white">=~</span> <span class="color-gold">Star</span><span class="color-white"> re </span><span class="color-white">-&gt;</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  s1 </span><span class="color-white">++</span><span class="color-white"> s2 </span><span class="color-white">=~</span> <span class="color-gold">Star</span><span class="color-white"> re</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(4)">Copy</button></pre><p><code class="inline-code-span">Star</code>는 합칠 수 있다는 것을 몇번의 시행착오를 거쳐서 증명해보겠습니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">T</span><span class="color-white"> s1 s2 re </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  inversion </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> [] = s1 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">    intros </span><span class="color-gold">H1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">    simpl</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    apply </span><span class="color-gold">H1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> s0 ++ s3 = s1 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">    intros </span><span class="color-gold">H4</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">    rewrite </span><span class="color-gold">H0</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">    <span class="color-gold">Abort</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(5)">Copy</button></pre><p>첫번째 시도입니다. 실패했습니다.</p><p>단순히 <code class="inline-code-span">inversion</code>을 사용하려고 하면 중간에 막힙니다. <code class="inline-code-span">Abort</code>를 하는 순간 goal에는 <code class="inline-code-span">s1 ++ s2 =~ Star re</code>가 남아 있습니다. 즉, 처음과 완전히 동일한 형태의 식이 남아서 순환하게됩니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">T</span><span class="color-white"> s1 s2 re </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  induction </span><span class="color-gold">H</span><span class="color-white"> as </span><span class="color-gold">[]</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> s2 =~ EmptyStr -&gt; [ ] ++ s2 =~ EmptyStr </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">    intros </span><span class="color-gold">H1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">    simpl</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    apply </span><span class="color-gold">H1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> s2 =~ Char x -&gt; [x] ++ s2 =~ Char x </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">    <span class="color-gold">Abort</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(6)">Copy</button></pre><p>두번째 시도입니다. 하다보니까 조금 이상합니다. 분명 처음에는 <code class="inline-code-span">s1</code>, <code class="inline-code-span">s2</code>가 <code class="inline-code-span">Star</code>인 경우에 대해서만 얘기하고 있었는데 <code class="inline-code-span">EmptyStr</code>, <code class="inline-code-span">Char</code>, <code class="inline-code-span">App</code> 등등 모든 경우에 대해서 다 증명하고 있습니다. <code class="inline-code-span">induction</code> tactic이 <code class="inline-code-span">s1 =~ Star re</code>를 쪼개면서 정보들을 날려서 그렇습니다. 즉, <code class="inline-code-span">s1 =~ Star re</code>였다는 사실을 얘가 까먹은 겁니다.</p><p><code class="inline-code-span">s1 =~ Star re</code>를 까먹었더라도 7가지 경우를 전부 증명해버리면 안되나? 라고 생각하실 수도 있습니다. 하지만 그것도 안 됩니다. <code class="inline-code-span">induction</code>을 하는 순간 <code class="inline-code-span">s1</code>이 7가지 종류의 <code class="inline-code-span">reg_exp</code>에 모두 대응됨을 보여야 합니다. 그게 <code class="inline-code-span">induction</code>이 하는 일이거든요. 하지만 <code class="inline-code-span">s1 =~ Star re</code>만 주어졌고 다른 관계들은 대응이 될지 안될지 모릅니다. 실제로 증명을 해보면 8번 줄에서 보듯 불가능한 증명이 나옵니다.</p><p>까먹은게 하나 더 있습니다. <a href="Chap5-3.html#keywordgeneralize">지난</a> 번에 봤듯이 <code class="inline-code-span">forall</code> 2개를 동시에 <code class="inline-code-span">intros</code>를 해버리면 귀납법을 쓸 수가 없습니다. 그래서 둘 중 하나를 <code class="inline-code-span">generalize dependent</code>를 이용해서 일반화를 해줘야합니다.</p><p><a id="keywordremember"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">T</span><span class="color-white"> s1 s2 re </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  generalize dependent s2</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  remember (</span><span class="color-gold">Star</span><span class="color-white"> re) as re&apos;</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  induction </span><span class="color-gold">H</span><span class="color-white"> as </span><span class="color-gold">[]</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> EmptyStr = Star re </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    discriminate</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> Char X = Star re </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">    discriminate</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> App re1 re2 = Star re </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">    discriminate</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> Union re1 re2 = Star re </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">    discriminate</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> Union re1 re2 = Star re </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-white">    discriminate</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> Star re0 = Star re, s1 = [] </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">    intros s2 </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">    simpl</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">    apply </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> Star re0 = Star re, s1 =~ re0 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">    intros s0 </span><span class="color-gold">H1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">    rewrite </span><span class="color-white">&lt;-</span><span class="color-white"> app_assoc</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">    apply </span><span class="color-gold">MStarApp</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code"><span class="color-white">    * (*</span><span class="color-gray">{-</span><span class="color-gray"> s1 =~ re0 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">      apply </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">    * (*</span><span class="color-gray">{-</span><span class="color-gray"> s2 ++ s0 =~ Star re0 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">      apply </span><span class="color-gold">IHexp_match2</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code">      <span class="color-white">+</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> Star re0 = Star re </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"><span class="color-white">        apply </span><span class="color-gold">Heqre</span><span class="color-white">&apos;</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code">      <span class="color-white">+</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> s0 =~ Star re0 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"><span class="color-white">        apply </span><span class="color-gold">H1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(7)">Copy</button></pre><p>최종 증명입니다. 일단, _번 줄에서 <code class="inline-code-span">generalize dependent s2</code>를 통해서 <code class="inline-code-span">s2</code>를 <code class="inline-code-span">forall</code>로 만들어줬습니다. 또한, 4번 줄에서 <code class="inline-code-span">remember (Star re) as re&apos;</code>라는 tactic을 사용했습니다. 이 덕분에 <code class="inline-code-span">s1 =~ Star re</code>라는 사실을 context가 기억합니다. 그 덕분에 6번 줄에서 context에 <code class="inline-code-span">EmptyStr = Star re</code>라는 조건이 들어가서 <code class="inline-code-span">discriminate</code> tactic을 사용할 수 있습니다. 똑같은 방식으로 <code class="inline-code-span">Star</code>를 제외한 모든 경우들을 지웠습니다. 그 다음에는 식의 형태에 맞게 <code class="inline-code-span">apply</code>를 적절히 사용하여 증명을 완료했습니다.</p><p>참고로 <code class="inline-code-span">app_assoc</code>은 <code class="inline-code-span">(s1 ++ s2) ++ s0</code>을 <code class="inline-code-span">s1 ++ s2 ++ s0</code>로 바꿔줍니다.</p><hr/><div class="align-center"><p><a href="index.html">메인으로 돌아가기</a></p></div><div class="align-left"><p>&lt;&lt; <a href="Chap7-2.html">Chap7-2. Using Evidence in Proofs</a></p></div><div class="align-right"><p><a href="Chap8-1.html">Chap8-1. Total Maps</a> &gt;&gt;</p></div><script>/*<![CDATA[*/
const fenced_code_block_contents = ["Inductive reg_exp (T : Type) : Type :=\n  | EmptySet\n  | EmptyStr\n  | Char (t : T)\n  | App (r1 r2 : reg_exp T)\n  | Union (r1 r2 : reg_exp T)\n  | Star (r : reg_exp T).\n\nArguments EmptySet {T}.\nArguments EmptyStr {T}.\nArguments Char {T} _.\nArguments App {T} _ _.\nArguments Union {T} _ _.\nArguments Star {T} _.", "Reserved Notation \"s =~ re\" (at level 80).\nInductive exp_match {T} : list T -> reg_exp T -> Prop :=\n  | MEmpty : [] =~ EmptyStr\n  | MChar x : [x] =~ (Char x)\n  | MApp s1 re1 s2 re2\n             (H1 : s1 =~ re1)\n             (H2 : s2 =~ re2)\n           : (s1 ++ s2) =~ (App re1 re2)\n  | MUnionL s1 re1 re2\n                (H1 : s1 =~ re1)\n              : s1 =~ (Union re1 re2)\n  | MUnionR re1 s2 re2\n                (H2 : s2 =~ re2)\n              : s2 =~ (Union re1 re2)\n  | MStar0 re : [] =~ (Star re)\n  | MStarApp s1 s2 re\n                 (H1 : s1 =~ re)\n                 (H2 : s2 =~ (Star re))\n               : (s1 ++ s2) =~ (Star re)\n\n  where \"s =~ re\" := (exp_match s re).", "Example reg_exp_ex1 : [1] =~ Union (Char 1) (Char 2).\nProof.\n  apply (MUnionL [1] (Char 1) (Char 2)).\n  - (*{- [1] =~ Char 1 -}*)\n    apply (MChar 1).\n  Qed.\n\nExample reg_exp_ex2 : [1; 2] =~ App (Char 1) (Char 2).\nProof.\n  apply (MApp [1] (Char 1) [2] (Char 2)).\n  - (*{- [1] =~ Char 1 -}*)\n    apply (MChar 1).\n  - (*{- [2] =~ Char 2 -}*)\n    apply (MChar 2).\nQed.", "Lemma empty_is_empty : forall T (s : list T),\n  ~ (s =~ EmptySet).\nProof.\n  intros T s.\n  unfold not.\n  intros H.\n  inversion H.\n  Qed.", "Lemma star_app: forall T (s1 s2 : list T) (re : reg_exp T),\n  s1 =~ Star re ->\n  s2 =~ Star re ->\n  s1 ++ s2 =~ Star re.", "Proof.\n  intros T s1 s2 re H.\n  inversion H.\n  - (*{- [] = s1 -}*)\n    intros H1.\n    simpl.\n    apply H1.\n  - (*{- s0 ++ s3 = s1 -}*)\n    intros H4.\n    rewrite H0.\n    Abort.", "Proof.\n  intros T s1 s2 re H.\n  induction H as [].\n  - (*{- s2 =~ EmptyStr -> [ ] ++ s2 =~ EmptyStr -}*)\n    intros H1.\n    simpl.\n    apply H1.\n  - (*{- s2 =~ Char x -> [x] ++ s2 =~ Char x -}*)\n    Abort.", "Proof.\n  intros T s1 s2 re H.\n  generalize dependent s2.\n  remember (Star re) as re'.\n  induction H as [].\n  - (*{- EmptyStr = Star re -}*)\n    discriminate.\n  - (*{- Char X = Star re -}*)\n    discriminate.\n  - (*{- App re1 re2 = Star re -}*)\n    discriminate.\n  - (*{- Union re1 re2 = Star re -}*)\n    discriminate.\n  - (*{- Union re1 re2 = Star re -}*)\n    discriminate.\n  - (*{- Star re0 = Star re, s1 = [] -}*)\n    intros s2 H.\n    simpl.\n    apply H.\n  - (*{- Star re0 = Star re, s1 =~ re0 -}*)\n    intros s0 H1.\n    rewrite <- app_assoc.\n    apply MStarApp.\n    * (*{- s1 =~ re0 -}*)\n      apply H.\n    * (*{- s2 ++ s0 =~ Star re0 -}*)\n      apply IHexp_match2.\n      + (*{- Star re0 = Star re -}*)\n        apply Heqre'.\n      + (*{- s0 =~ Star re0 -}*)\n        apply H1.\n  Qed."];

function copy_code_to_clipboard(index) {
    navigator.clipboard.writeText(fenced_code_block_contents[index]);
}/*]]>*/</script>
        <a id="bottom"></a>
    </article>




    <footer class="markdown">
<p><br/></p><p><br/></p><hr/><div class="align-center"><p>2021 ~ 2023 &copy; Baehyunsol</p></div>
    </footer>


    <script src="colors.js"></script>

    
    <script src="nav.js"></script>
    
    
    
    <script src="header.js"></script>
    
<script src="collapsible_tables.js"></script></body>

</html>