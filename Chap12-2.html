<!DOCTYPE html><html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    
    <title>Chap12-2</title>
    
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
    <!--<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" rel="stylesheet"/> -->
    
    <link href="page.css" rel="stylesheet"/><link href="markdown.css" rel="stylesheet"/><link href="nav.css" rel="stylesheet"/><link href="header.css" rel="stylesheet"/>
    
</head>

<body>


    <header>
<p><div class="topmenu deactivated"><a href="index.html">Home</a> <a href="index.html#index-by-chapter">단원별 목차</a> <a href="index.html#index-by-keyword">키워드 목차</a> <a href="Appendix.html">부록</a></div><div class="mobileview"><a id="navbutton">&#9776;</a></div></p>
    </header>



    <nav>
<p><a id="settingsopenbutton">&#9728;</a><a href="#top">&#9650;</a><a href="#bottom">&#9660;</a></p><div id="settingsmenubg"><p><div id="settingsmenu"> <a id="settingsclosebutton">&#10006;</a> <a id="changethemebutton">Set Light Theme</a> <a id="growhorizontalbutton">Grow Horizontally</a> <a id="shrinkhorizontalbutton">Shrink Horizontally</a> <a id="growfontbutton">Grow Font</a> <a id="shrinkfontbutton">Shrink Font</a> </div></p></div>
    </nav>


    <article class="markdown">
        <a id="top"></a>
<table><thead id="table-collapse-toggle-0" class="collapsible collapsed" onclick="collapse_table('0')"><tr><th>목차</th></tr></thead><tbody id="collapsible-table-0" class="invisible"><tr><td><div class="toc"><ol type="1"><li><a href="#coq-automation">Coq Automation</a><ol type="1"><li><a href="#try">try</a></li><li><a href="#-tactical">; tactical</a></li><li><a href="#repeat">repeat</a></li><li><a href="#lia">lia</a></li><li><a href="#clear">clear</a></li><li><a href="#subst">subst</a></li><li><a href="#assumption">assumption</a></li><li><a href="#auto">auto</a></li></ol></li></ol></div></td></tr></tbody></table><h1 id="coq-automation">Coq Automation</h1><p>이번 장에서는 Coq의 증명 노가다를 도와줄 tactic들을 소개합니다. 이번에 소개할 tactic들은 tactic에 쓰는 tactic입니다. 책의 표현을 빌리자면 higher-order tactic이죠.</p><h2 id="try">try</h2><p><a id="keywordtry"></a></p><p>원래 Coq에서 tactic이 실패를 하면 (ex. 똑같지 않은데 <code class="inline-code-span">reflexivity</code>를 쓰면) 증명 전체가 실패합니다. 하지만 <code class="inline-code-span">try</code> 뒤에 있는 tactic은 실패를 하더라도 아무 영향이 없습니다. 즉,</p><ul><li><code class="inline-code-span">try</code> 뒤의 tactic이 성공하면<ul><li>그 tactic이 context에 반영됩니다.</li></ul></li><li><code class="inline-code-span">try</code>뒤의 tactic이 실패하면<ul><li>그 tactic을 통째로 무시하고 다음으로 넘어갑니다.</li></ul></li></ul><p>얼핏 보면 저런게 왜 필요한가 싶습니다. 실패하는 tactic은 애초에 안 쓸텐데 말이죠... 손으로 증명을 할 때는 그렇습니다. 하지만 증명 자체를 자동화하는 경우에는 다릅니다. 증명을 위한 스크립트를 쓰면 실패하는 tactic이 섞여 있을 수도 있습니다. 이따가 예시와 함께 설명하겠습니다.</p><h2 id="-tactical">; tactical</h2><p><a id="keywordsemicolon"></a></p><p><code class="inline-code-span">destruct</code>나 <code class="inline-code-span">induction</code> 등등을 사용하면 여러 subgoal이 생깁니다. subgoal의 개수가 많은데 각 subgoal에 동일한 tactic을 적용하고 싶으면 어떻게 할까요? 아래의 예시를 보겠습니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> foo </span><span class="color-white">:</span><span class="color-white"> forall n</span><span class="color-white">,</span> <span class="color-gold">0</span> <span class="color-white">&lt;=?</span><span class="color-white"> n </span><span class="color-white">=</span><span class="color-white"> true</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  intros</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  destruct n</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> n = 0 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">      simpl</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">      reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">    <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> n = S n&apos; </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">      simpl</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">      reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(0)">Copy</button></pre><p><code class="inline-code-span">simpl</code>과 <code class="inline-code-span">reflexivity</code>가 2번씩 반복되는게 거슬리죠? <code class="inline-code-span">;</code>를 이용해서 간략하게 해보겠습니다. 아래를 봅시다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> foo </span><span class="color-white">:</span><span class="color-white"> forall n</span><span class="color-white">,</span> <span class="color-gold">0</span> <span class="color-white">&lt;=?</span><span class="color-white"> n </span><span class="color-white">=</span><span class="color-white"> true</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  intros</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  destruct n;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  simpl;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(1)">Copy</button></pre><p><code class="inline-code-span">destruct</code> 뒤에 <code class="inline-code-span">;</code>가 붙어있기 때문에 그 뒤에 오는 <code class="inline-code-span">simpl</code>이 두 subgoal에 각각 적용되고, <code class="inline-code-span">simpl</code> 뒤에 <code class="inline-code-span">;</code>가 있기 때문에 <code class="inline-code-span">reflexivity</code>도 2번 적용됩니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Theorem</span><span class="color-white"> optimize_0plus_sound&apos;</span><span class="color-white">:</span><span class="color-white"> forall a</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  aeval (optimize_0plus a) </span><span class="color-white">=</span><span class="color-white"> aeval a</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  intros a</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  induction a;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  try (
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    simpl;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">    rewrite </span><span class="color-gold">IHa1</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">    rewrite </span><span class="color-gold">IHa2</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">    reflexivity
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">  )</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> ANum </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">    reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> APlus </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-white">    destruct a1 eqn</span><span class="color-white">:</span><span class="color-gold">Ea1</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">    try (
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">      simpl;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">      simpl </span><span class="color-violet">in</span> <span class="color-gold">IHa1</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">      rewrite </span><span class="color-gold">IHa1</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">      rewrite </span><span class="color-gold">IHa2</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">      reflexivity
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">    )</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code">    <span class="color-white">+</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> a1 = ANum n </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code"><span class="color-white">      destruct n eqn</span><span class="color-white">:</span><span class="color-gold">En</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">      simpl;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">      rewrite </span><span class="color-gold">IHa2</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">      reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(2)">Copy</button></pre><p><a href="Chap12-1.html#optimizations">이전 단원</a>에서 봤던 <code class="inline-code-span">optimize_0plus</code>의 증명을 <code class="inline-code-span">try</code>와 <code class="inline-code-span">;</code>를 이용해서 해봤습니다. 6번 줄의 <code class="inline-code-span">try</code>가 <code class="inline-code-span">AMinus</code>와 <code class="inline-code-span">AMult</code>의 경우를 자동으로 처리해 주고 나머지 경우들은 수동으로 처리했습니다.</p><h2 id="repeat">repeat</h2><p><a id="keywordrepeat"></a></p><p><code class="inline-code-span">repeat</code>은 뒤에 오는 tactic을 계속 반복해서 실행합니다. 실행하다가 tactic이 아무런 효과도 없거나 실패하면 반복을 멈추고 넘어갑니다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Theorem</span> <span class="color-gold">In10</span> <span class="color-white">:</span> <span class="color-gold">In</span> <span class="color-gold">10</span><span class="color-white"> [</span><span class="color-gold">1</span><span class="color-white">;</span><span class="color-gold">2</span><span class="color-white">;</span><span class="color-gold">3</span><span class="color-white">;</span><span class="color-gold">4</span><span class="color-white">;</span><span class="color-gold">5</span><span class="color-white">;</span><span class="color-gold">6</span><span class="color-white">;</span><span class="color-gold">7</span><span class="color-white">;</span><span class="color-gold">8</span><span class="color-white">;</span><span class="color-gold">9</span><span class="color-white">;</span><span class="color-gold">10</span><span class="color-white">]</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  repeat (try (left; reflexivity); right)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(3)">Copy</button></pre><p>위의 예시를 뜯어보겠습니다. <code class="inline-code-span">In 10 [1;2;3;...]</code>을 <code class="inline-code-span">unfold</code> 해보면 <code class="inline-code-span">1 = 10 \/ 2 = 10 \/ 3 = 10 \/ ... \/ 10 = 10</code>이 나옵니다. 저 상태에서 <code class="inline-code-span">left</code>를 하면 <code class="inline-code-span">1 = 10</code>만 남겠죠? 거기에 <code class="inline-code-span">reflexivity</code>를 하면 당연히 실패합니다. 그럼 다음으로 넘어갑니다. 그런 식으로 계속 <code class="inline-code-span">repeat</code>을 해서 <code class="inline-code-span">10 = 10</code>까지 간 뒤, 거기에 <code class="inline-code-span">reflexivity</code>를 해서 증명을 끝냅니다.</p><h2 id="lia">lia</h2><p><a id="keywordlia"></a></p><p><code class="inline-code-span">lia</code>는 아주 유용한 tactic입니다. 먼저 <code class="inline-code-span">From Coq Require Import Lia.</code>를 이용해서 <code class="inline-code-span">lia</code>를 가져옵시다. <code class="inline-code-span">lia</code>의 기능은 아래와 같습니다.</p><blockquote>상수, 덧셈 (<code class="inline-code-span">+</code>, <code class="inline-code-span">S</code>), 뺄셈 (<code class="inline-code-span">-</code>, <code class="inline-code-span">pred</code>), 상수 곱셈, 등호 (<code class="inline-code-span">=</code>, <code class="inline-code-span">!=</code>), 대소 (<code class="inline-code-span">&lt;=</code>, <code class="inline-code-span">&gt;</code>), 논리 연산자 (<code class="inline-code-span">\/</code>, <code class="inline-code-span">/\</code>, <code class="inline-code-span">~</code>, <code class="inline-code-span">-&gt;</code>)로만 이뤄진 정리를 한번에 풉니다. </blockquote><p>정리 자체가 거짓이거나 <code class="inline-code-span">lia</code>가 다룰 수 없는 기호가 있을 경우 <code class="inline-code-span">lia</code>는 실패합니다. 예시를 보겠습니다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Example</span><span class="color-white"> silly_presburger_example </span><span class="color-white">:</span><span class="color-white"> forall m n o p</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  m </span><span class="color-white">+</span><span class="color-white"> n </span><span class="color-white">&lt;=</span><span class="color-white"> n </span><span class="color-white">+</span><span class="color-white"> o </span><span class="color-white">/\</span><span class="color-white"> o </span><span class="color-white">+</span> <span class="color-gold">3</span> <span class="color-white">=</span><span class="color-white"> p </span><span class="color-white">+</span> <span class="color-gold">3</span> <span class="color-white">-&gt;</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  m </span><span class="color-white">&lt;=</span><span class="color-white"> p</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  intros</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  lia</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(4)">Copy</button></pre><p>간단하죠?</p><h2 id="clear">clear</h2><p><a id="keywordclear"></a></p><p>말그대로입니다. context에 <code class="inline-code-span">H</code>라는게 있을 때 <code class="inline-code-span">clear H</code>를 하면 <code class="inline-code-span">H</code>가 context에서 사라집니다.</p><h2 id="subst">subst</h2><p><a id="keywordsubst"></a></p><p><code class="inline-code-span">subst</code>도 아주 유용한 tactic입니다. Coq으로 증명을 하다보면 context에 불필요한 이름들이 많이 들어가서 더러워집니다. 예를 들어서 <code class="inline-code-span">c1 = c</code>,  <code class="inline-code-span">c2 = c1</code> 등등의 의미없는 등식들이 context에 가득 차 있으면 증명을 따라가기 버겁습니다. 저런 의미없는 등식들을 날려주는게 <code class="inline-code-span">subst</code>입니다. 예를 들어서 context에 <code class="inline-code-span">x = e</code>나 <code class="inline-code-span">e = x</code>가 있을 때 <code class="inline-code-span">subst x</code>를 하면 증명의 모든 부분에 있는 <code class="inline-code-span">x</code>를 전부 찾아서 <code class="inline-code-span">e</code>로 바꿔준 후, context의 <code class="inline-code-span">x = e</code>를 날려버립니다.</p><p>더 간편하게 쓰려면 <code class="inline-code-span">subst</code>라고만 해도 됩니다. 그러면 교체가 가능한 모든 이름들을 교체한 후 context에서 필요없는 등식들을 날려버립니다. 아래의 예시를 보겠습니다.</p><pre class="fenced-code-block"><code><span class="code-fence-row"><span class="code-fence-code">1 goal</span></span>
<span class="code-fence-row"><span class="code-fence-code">c : com</span></span>
<span class="code-fence-row"><span class="code-fence-code">st, st&apos; : state</span></span>
<span class="code-fence-row"><span class="code-fence-code">H : st =[ skip; c ]=&gt; st&apos;</span></span>
<span class="code-fence-row"><span class="code-fence-code">c1, c2 : com</span></span>
<span class="code-fence-row"><span class="code-fence-code">st0, st&apos;0, st&apos;&apos; : state</span></span>
<span class="code-fence-row"><span class="code-fence-code">H2 : st =[ skip ]=&gt; st&apos;0</span></span>
<span class="code-fence-row"><span class="code-fence-code">H5 : st&apos;0 =[ c ]=&gt; st&apos;</span></span>
<span class="code-fence-row"><span class="code-fence-code">H0 : c1 = &lt;{ skip }&gt;</span></span>
<span class="code-fence-row"><span class="code-fence-code">H1 : c2 = c</span></span>
<span class="code-fence-row"><span class="code-fence-code">H3 : st0 = st</span></span>
<span class="code-fence-row"><span class="code-fence-code">H4 : st&apos;&apos; = st&apos;</span></span>
<span class="code-fence-row"><span class="code-fence-code">______________________________________(1/1)</span></span>
<span class="code-fence-row"><span class="code-fence-code">st =[ c ]=&gt; st&apos;</span></span>
</code></pre><p>위는 진행 중인 어떤 증명의 context와 goal입니다. 한 눈에 봐도 더럽죠? 저 상태에서 <code class="inline-code-span">subst</code>를 하면 아래와 같이 변합니다.</p><pre class="fenced-code-block"><code><span class="code-fence-row"><span class="code-fence-code">1 goal</span></span>
<span class="code-fence-row"><span class="code-fence-code">c : com</span></span>
<span class="code-fence-row"><span class="code-fence-code">st, st&apos; : state</span></span>
<span class="code-fence-row"><span class="code-fence-code">H : st =[ skip; c ]=&gt; st&apos;</span></span>
<span class="code-fence-row"><span class="code-fence-code">st&apos;0 : state</span></span>
<span class="code-fence-row"><span class="code-fence-code">H2 : st =[ skip ]=&gt; st&apos;0</span></span>
<span class="code-fence-row"><span class="code-fence-code">H5 : st&apos;0 =[ c ]=&gt; st&apos;</span></span>
<span class="code-fence-row"><span class="code-fence-code">______________________________________(1/1)</span></span>
<span class="code-fence-row"><span class="code-fence-code">st =[ c ]=&gt; st&apos;</span></span>
</code></pre><p><code class="inline-code-span">st0</code>와 <code class="inline-code-span">st&apos;&apos;</code>, <code class="inline-code-span">c1</code>, <code class="inline-code-span">c2</code>는 날려버려도 상관이 없으니 날려버렸습니다. 이렇게 하면 필요한 이름들만 남게 돼서 훨씬 보기 좋습니다.</p><h2 id="assumption">assumption</h2><p><a id="keywordassumption"></a></p><p>아주 간단합니다. context에 <code class="inline-code-span">H: a = b</code>가 있고 goal도 <code class="inline-code-span">a = b</code>이다? 둘이 모양이 완전 동일하죠? 그럼 그 즉시 증명을 끝냅니다.</p><p>즉, context를 뒤져서 goal과 동일하게 생긴 가정을 찾고, 그런 가정이 있으면 즉시 증명을 끝냅니다. Coq이 자동으로 <code class="inline-code-span">apply</code>를 해준다고 생각해도 됩니다.</p><h2 id="auto">auto</h2><p><a id="keywordauto"></a></p><p>아주 강력한 tactic입니다. 이름부터 세 보이죠? 아래의 두 증명을 봅시다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Example</span><span class="color-white"> auto_example_1 </span><span class="color-white">:</span><span class="color-white"> forall (</span><span class="color-gold">P</span> <span class="color-gold">Q</span> <span class="color-gold">R</span><span class="color-white">:</span> <span class="color-gold">Prop</span><span class="color-white">)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  (</span><span class="color-gold">P</span> <span class="color-white">-&gt;</span> <span class="color-gold">Q</span><span class="color-white">) </span><span class="color-white">-&gt;</span><span class="color-white"> (</span><span class="color-gold">Q</span> <span class="color-white">-&gt;</span> <span class="color-gold">R</span><span class="color-white">) </span><span class="color-white">-&gt;</span> <span class="color-gold">P</span> <span class="color-white">-&gt;</span> <span class="color-gold">R</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">P</span> <span class="color-gold">Q</span> <span class="color-gold">R</span> <span class="color-gold">H1</span> <span class="color-gold">H2</span> <span class="color-gold">H3</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  apply </span><span class="color-gold">H2</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  apply </span><span class="color-gold">H1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">  assumption</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-gold">Example</span><span class="color-white"> auto_example_1&apos; </span><span class="color-white">:</span><span class="color-white"> forall (</span><span class="color-gold">P</span> <span class="color-gold">Q</span> <span class="color-gold">R</span><span class="color-white">:</span> <span class="color-gold">Prop</span><span class="color-white">)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">  (</span><span class="color-gold">P</span> <span class="color-white">-&gt;</span> <span class="color-gold">Q</span><span class="color-white">) </span><span class="color-white">-&gt;</span><span class="color-white"> (</span><span class="color-gold">Q</span> <span class="color-white">-&gt;</span> <span class="color-gold">R</span><span class="color-white">) </span><span class="color-white">-&gt;</span> <span class="color-gold">P</span> <span class="color-white">-&gt;</span> <span class="color-gold">R</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">  auto</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(7)">Copy</button></pre><p>위의 두 증명은 동일합니다. <code class="inline-code-span">intros</code>와 <code class="inline-code-span">apply</code>로만 이뤄진 증명은, <code class="inline-code-span">auto</code>로 즉시 끝낼 수 있습니다. 만약 <code class="inline-code-span">auto</code>가 적용 가능할 경우 증명이 즉시 끝나고 적용 불가능할 경우 증명에 손을 대지 않기 때문에 아무때나 써도 안전합니다.</p><p><code class="inline-code-span">auto</code>가 내부적으로 무슨 일을 하는지 궁금할 경우 <code class="inline-code-span">auto</code> 대신 <code class="inline-code-span">debug auto</code> 혹은 <code class="inline-code-span">info_auto</code> 라고<span class="footnote-ref" id="footnote-ref-0"><a href="#footnote-cite-0">[0]</a></span> 입력하면 됩니다.</p><p>실제로 실행하기 전까지 <code class="inline-code-span">auto</code>는 증명의 길이가 얼마나 길지 예측할 수 없습니다. 그렇다고 증명이 끝날 때까지 계속 탐색을 하면 <code class="inline-code-span">auto</code>가 무한루프에 빠질 수도 있습니다. 그래서 <code class="inline-code-span">auto</code>는 증명의 깊이가 일정 수준 이상 되면 (기본값은 5입니다) 증명을 포기합니다. 깊이를 임의로 주고 싶으면 <code class="inline-code-span">auto 6</code>과 같은 방식으로 <code class="inline-code-span">auto</code> 뒤에 숫자를 붙여서 주면 됩니다.</p><hr/><div class="align-center"><p><a href="index.html">메인으로 돌아가기</a></p></div><div class="align-left"><p>&lt;&lt; <a href="Chap12-1.html">Chapter 12-1. Arithmetic and Boolean Expressions</a></p></div><div class="align-right"><p><a href="Chap12-3.html">Chapter 12-3. States and Commands</a> &gt;&gt;</p></div><hr class="footnote-hr"/><div class="mdxt-footnote-cites"><p><div class="footnote-cite"><a id="footnote-cite-0"></a><a href="#footnote-ref-0"> [0]</a> 전자는 띄어쓰기가 있고 후자는 <code class="inline-code-span">_</code>가 있습니다. 주의하세요.</div></p></div><script>/*<![CDATA[*/
const fenced_code_block_contents = ["Lemma foo : forall n, 0 <=? n = true.\nProof.\n  intros.\n  destruct n.\n    - (*{- n = 0 -}*)\n      simpl.\n      reflexivity.\n    - (*{- n = S n' -}*)\n      simpl.\n      reflexivity.\nQed.", "Lemma foo : forall n, 0 <=? n = true.\nProof.\n  intros.\n  destruct n;\n  simpl;\n  reflexivity.\n  Qed.", "Theorem optimize_0plus_sound': forall a,\n  aeval (optimize_0plus a) = aeval a.\nProof.\n  intros a.\n  induction a;\n  try (\n    simpl;\n    rewrite IHa1;\n    rewrite IHa2;\n    reflexivity\n  ).\n  - (*{- ANum -}*)\n    reflexivity.\n  - (*{- APlus -}*)\n    destruct a1 eqn:Ea1;\n    try (\n      simpl;\n      simpl in IHa1;\n      rewrite IHa1;\n      rewrite IHa2;\n      reflexivity\n    ).\n    + (*{- a1 = ANum n -}*)\n      destruct n eqn:En;\n      simpl;\n      rewrite IHa2;\n      reflexivity.\n  Qed.", "Theorem In10 : In 10 [1;2;3;4;5;6;7;8;9;10].\nProof.\n  repeat (try (left; reflexivity); right).\nQed.", "Example silly_presburger_example : forall m n o p,\n  m + n <= n + o /\\ o + 3 = p + 3 ->\n  m <= p.\nProof.\n  intros.\n  lia.\nQed.", "", "", "Example auto_example_1 : forall (P Q R: Prop),\n  (P -> Q) -> (Q -> R) -> P -> R.\nProof.\n  intros P Q R H1 H2 H3.\n  apply H2.\n  apply H1.\n  assumption.\nQed.\n\nExample auto_example_1' : forall (P Q R: Prop),\n  (P -> Q) -> (Q -> R) -> P -> R.\nProof.\n  auto.\nQed."];

function copy_code_to_clipboard(index) {
    navigator.clipboard.writeText(fenced_code_block_contents[index]);
}/*]]>*/</script>
        <a id="bottom"></a>
    </article>




    <footer class="markdown">
<p><br/></p><p><br/></p><hr/><div class="align-center"><p>2021 ~ 2023 &copy; Baehyunsol</p></div>
    </footer>


    <script src="colors.js"></script>

    
    <script src="nav.js"></script>
    
    
    
    <script src="header.js"></script>
    
<script src="collapsible_tables.js"></script></body>

</html>