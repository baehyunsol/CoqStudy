<!DOCTYPE html><html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    
    <title>Chap13-2</title>
    
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
    <!--<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" rel="stylesheet"/> -->
    
    <link href="page.css" rel="stylesheet"/><link href="markdown.css" rel="stylesheet"/><link href="nav.css" rel="stylesheet"/><link href="header.css" rel="stylesheet"/>
    
</head>

<body>


    <header>
<p><div class="topmenu deactivated"><a href="index.html">Home</a> <a href="index.html#index-by-chapter">단원별 목차</a> <a href="index.html#index-by-keyword">키워드 목차</a> <a href="Appendix.html">부록</a></div><div class="mobileview"><a id="navbutton">&#9776;</a></div></p>
    </header>



    <nav>
<p><a id="settingsopenbutton">&#9728;</a><a href="#top">&#9650;</a><a href="#bottom">&#9660;</a></p><div id="settingsmenubg"><p><div id="settingsmenu"> <a id="settingsclosebutton">&#10006;</a> <a id="changethemebutton">Set Light Theme</a> <a id="growhorizontalbutton">Grow Horizontally</a> <a id="shrinkhorizontalbutton">Shrink Horizontally</a> <a id="growfontbutton">Grow Font</a> <a id="shrinkfontbutton">Shrink Font</a> </div></p></div>
    </nav>


    <article class="markdown">
        <a id="top"></a>
<table><thead id="table-collapse-toggle-0" class="collapsible collapsed" onclick="collapse_table('0')"><tr><th>목차</th></tr></thead><tbody id="collapsible-table-0" class="invisible"><tr><td><div class="toc"><ol type="1"><li><a href="#program-equivalence">Program Equivalence</a><ol type="1"><li><a href="#congruence">Congruence</a></li></ol></li></ol></div></td></tr></tbody></table><h1 id="program-equivalence">Program Equivalence</h1><p>이전 단원에서 <code class="inline-code-span">aequiv</code>, <code class="inline-code-span">bequiv</code>, <code class="inline-code-span">cequiv</code>를 살펴 봤습니다. 쟤네가 진짜 등호인지 볼까요? 등호는 3가지 아래의 성질이 성립합니다.</p><ol type="1"><li>reflexivity : <code class="inline-code-span">a = a</code></li><li>symmetry : <code class="inline-code-span">a = b -&gt; b = a</code></li><li>transitivity : <code class="inline-code-span">a = b -&gt; b = c -&gt; a = c</code></li></ol><p><code class="inline-code-span">aequiv</code>와 <code class="inline-code-span">bequiv</code>, <code class="inline-code-span">cequiv</code>도 저 성질들이 성립하는지 볼까요?</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> refl_aequiv </span><span class="color-white">:</span><span class="color-white"> forall (a </span><span class="color-white">:</span><span class="color-white"> aexp)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  aequiv a a</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  intros a st</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> sym_aequiv </span><span class="color-white">:</span><span class="color-white"> forall (a1 a2 </span><span class="color-white">:</span><span class="color-white"> aexp)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">  aequiv a1 a2 </span><span class="color-white">-&gt;</span><span class="color-white"> aequiv a2 a1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">  intros a1 a2 </span><span class="color-gold">H</span><span class="color-white"> st</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">  symmetry</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">  apply </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> trans_aequiv </span><span class="color-white">:</span><span class="color-white"> forall (a1 a2 a3 </span><span class="color-white">:</span><span class="color-white"> aexp)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">  aequiv a1 a2 </span><span class="color-white">-&gt;</span><span class="color-white"> aequiv a2 a3 </span><span class="color-white">-&gt;</span><span class="color-white"> aequiv a1 a3</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">  unfold aequiv</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">  intros a1 a2 a3 </span><span class="color-gold">H12</span> <span class="color-gold">H23</span><span class="color-white"> st</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">  rewrite (</span><span class="color-gold">H12</span><span class="color-white"> st)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">  rewrite (</span><span class="color-gold">H23</span><span class="color-white"> st)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> refl_bequiv </span><span class="color-white">:</span><span class="color-white"> forall (b </span><span class="color-white">:</span><span class="color-white"> bexp)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">  bequiv b b</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"><span class="color-white">  intros b st</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> sym_bequiv </span><span class="color-white">:</span><span class="color-white"> forall (b1 b2 </span><span class="color-white">:</span><span class="color-white"> bexp)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"><span class="color-white">  bequiv b1 b2 </span><span class="color-white">-&gt;</span><span class="color-white"> bequiv b2 b1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"><span class="color-white">  intros b1 b2 </span><span class="color-gold">H</span><span class="color-white"> st</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">  symmetry</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code"><span class="color-white">  apply </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> trans_bequiv </span><span class="color-white">:</span><span class="color-white"> forall (b1 b2 b3 </span><span class="color-white">:</span><span class="color-white"> bexp)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code"><span class="color-white">  bequiv b1 b2 </span><span class="color-white">-&gt;</span><span class="color-white"> bequiv b2 b3 </span><span class="color-white">-&gt;</span><span class="color-white"> bequiv b1 b3</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code"><span class="color-white">  intros b1 b2 b3 </span><span class="color-gold">H12</span> <span class="color-gold">H23</span><span class="color-white"> st</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code"><span class="color-white">  rewrite (</span><span class="color-gold">H12</span><span class="color-white"> st)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"><span class="color-white">  rewrite (</span><span class="color-gold">H23</span><span class="color-white"> st)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> refl_cequiv </span><span class="color-white">:</span><span class="color-white"> forall (c </span><span class="color-white">:</span><span class="color-white"> com)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code"><span class="color-white">  cequiv c c</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code"><span class="color-white">  intros c st st&apos;</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">56</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">57</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> sym_cequiv </span><span class="color-white">:</span><span class="color-white"> forall (c1 c2 </span><span class="color-white">:</span><span class="color-white"> com)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">58</span><span class="code-fence-code"><span class="color-white">  cequiv c1 c2 </span><span class="color-white">-&gt;</span><span class="color-white"> cequiv c2 c1</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">59</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">60</span><span class="code-fence-code"><span class="color-white">  unfold cequiv</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">61</span><span class="code-fence-code"><span class="color-white">  intros c1 c2 </span><span class="color-gold">H</span><span class="color-white"> st st&apos;</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">62</span><span class="code-fence-code"><span class="color-white">  rewrite </span><span class="color-gold">H</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">63</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">64</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">65</span><span class="code-fence-code">
</span></span>
<span class="code-fence-row"><span class="code-fence-index">66</span><span class="code-fence-code"><span class="color-gold">Lemma</span><span class="color-white"> trans_cequiv </span><span class="color-white">:</span><span class="color-white"> forall (c1 c2 c3 </span><span class="color-white">:</span><span class="color-white"> com)</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">67</span><span class="code-fence-code"><span class="color-white">  cequiv c1 c2 </span><span class="color-white">-&gt;</span><span class="color-white"> cequiv c2 c3 </span><span class="color-white">-&gt;</span><span class="color-white"> cequiv c1 c3</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">68</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">69</span><span class="code-fence-code"><span class="color-white">  unfold cequiv</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">70</span><span class="code-fence-code"><span class="color-white">  intros c1 c2 c3 </span><span class="color-gold">H12</span> <span class="color-gold">H23</span><span class="color-white"> st st&apos;</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">71</span><span class="code-fence-code"><span class="color-white">  rewrite </span><span class="color-gold">H12</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">72</span><span class="code-fence-code"><span class="color-white">  apply </span><span class="color-gold">H23</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">73</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(0)">Copy</button></pre><p>모든 증명들을 첨부해두었습니다. Coq으로 직접 실행시켜보면서 공부해보세요. 또한, 나중에 저 정리들을 자주 쓸테니까 잘 기억해두시기 바랍니다.</p><h2 id="congruence">Congruence</h2><p>또한 행동이 동일하면 congruence도 성립합니다. 작은 프로그램 2개가 동일하면 그 프로그램들이 포함된 큰 프로그램 2개도 동일하다는 뜻입니다. 아래의 표기를 보겠습니다.</p><pre class="fenced-code-block"><code><span class="code-fence-row"><span class="code-fence-code">        aequiv a a&apos;</span></span>
<span class="code-fence-row"><span class="code-fence-code">-------------------------</span></span>
<span class="code-fence-row"><span class="code-fence-code">cequiv (x := a) (x := a&apos;)</span></span>
<span class="code-fence-row"><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-code">     cequiv c1 c1&apos;</span></span>
<span class="code-fence-row"><span class="code-fence-code">     cequiv c2 c2&apos;</span></span>
<span class="code-fence-row"><span class="code-fence-code">-----------------------</span></span>
<span class="code-fence-row"><span class="code-fence-code">cequiv (c1;c2) (c1&apos;;c2&apos;)</span></span>
</code></pre><p>위는 congruence의 예시인데, 예를 들어서 <code class="inline-code-span">a</code>와 <code class="inline-code-span">a&apos;</code>가 동일하면 <code class="inline-code-span">x := a</code>와 <code class="inline-code-span">x := a&apos;</code>도 동일합니다. 아래에서 증명을 보겠습니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Theorem</span> <span class="color-gold">CAsgn_congruence</span> <span class="color-white">:</span><span class="color-white"> forall x a a&apos;</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  aequiv a a&apos; </span><span class="color-white">-&gt;</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  cequiv </span><span class="color-white">&lt;</span><span class="color-white">{x </span><span class="color-white">:=</span><span class="color-white"> a}</span><span class="color-white">&gt;</span> <span class="color-white">&lt;</span><span class="color-white">{x </span><span class="color-white">:=</span><span class="color-white"> a&apos;}</span><span class="color-white">&gt;.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  intros x a a&apos; </span><span class="color-gold">H</span><span class="color-white"> st st&apos;</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  split;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">H2</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">  inversion </span><span class="color-gold">H2</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">  subst;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">  apply </span><span class="color-gold">E_Asgn</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">  rewrite </span><span class="color-gold">H</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(2)">Copy</button></pre><p>Congruence는 별거 없어 보이지만 아주 중요합니다. 아주 큰 프로그램을 가지고 증명을 진행한다고 생각해보세요. 가정들을 적고 이름을 관리하는 것만 해도 머리가 아픕니다. 하지만 큰 프로그램들을 작은 프로그램들로 나눠서 작은 증명들을 한 뒤, 그 증명들을 합칠 수 있다고 생각하면 마음이 편해집니다. 뒤에서도 계속 나오는 내용이니 잘 봐둡시다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Theorem</span> <span class="color-gold">CSeq_congruence</span> <span class="color-white">:</span><span class="color-white"> forall c1 c1&apos; c2 c2&apos;</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  cequiv c1 c1&apos; </span><span class="color-white">-&gt;</span><span class="color-white"> cequiv c2 c2&apos; </span><span class="color-white">-&gt;</span><span class="color-white"> cequiv </span><span class="color-white">&lt;</span><span class="color-white">{ c1;c2 }</span><span class="color-white">&gt;</span> <span class="color-white">&lt;</span><span class="color-white">{ c1&apos;;c2&apos; }</span><span class="color-white">&gt;.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  intros c1 c1&apos; c2 c2&apos; </span><span class="color-gold">H1</span> <span class="color-gold">H2</span><span class="color-white"> st st&apos;</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  split;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">H3</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">  inversion </span><span class="color-gold">H3</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">  subst</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> c1 -&gt; c1&apos; </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H5</span><span class="color-white">:</span><span class="color-white"> st </span><span class="color-white">=</span><span class="color-white">[ c1&apos; ]</span><span class="color-white">=&gt;</span><span class="color-white"> st&apos;</span><span class="color-gold">0</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">      { apply </span><span class="color-gold">H1</span><span class="color-white">.</span><span class="color-white"> apply </span><span class="color-gold">H4</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H6</span><span class="color-white">:</span><span class="color-white"> st&apos;</span><span class="color-gold">0</span> <span class="color-white">=</span><span class="color-white">[ c2&apos; ]</span><span class="color-white">=&gt;</span><span class="color-white"> st&apos;)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">      { apply </span><span class="color-gold">H2</span><span class="color-white">.</span><span class="color-white"> apply </span><span class="color-gold">H7</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">E_Seq</span><span class="color-white"> c1&apos; c2&apos; st st&apos;</span><span class="color-gold">0</span><span class="color-white"> st&apos; </span><span class="color-gold">H5</span> <span class="color-gold">H6</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> c1&apos; -&gt; c1 </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H5</span><span class="color-white">:</span><span class="color-white"> st </span><span class="color-white">=</span><span class="color-white">[ c1 ]</span><span class="color-white">=&gt;</span><span class="color-white"> st&apos;</span><span class="color-gold">0</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">      { apply </span><span class="color-gold">H1</span><span class="color-white">.</span><span class="color-white"> apply </span><span class="color-gold">H4</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H6</span><span class="color-white">:</span><span class="color-white"> st&apos;</span><span class="color-gold">0</span> <span class="color-white">=</span><span class="color-white">[ c2 ]</span><span class="color-white">=&gt;</span><span class="color-white"> st&apos;)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">      { apply </span><span class="color-gold">H2</span><span class="color-white">.</span><span class="color-white"> apply </span><span class="color-gold">H7</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">E_Seq</span><span class="color-white"> c1 c2 st st&apos;</span><span class="color-gold">0</span><span class="color-white"> st&apos; </span><span class="color-gold">H5</span> <span class="color-gold">H6</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(3)">Copy</button></pre><p>또다른 congruence를 증명해보았습니다. 증명의 핵심은 <code class="inline-code-span">E_Seq</code>를 적용하는 것입니다. <code class="inline-code-span">E_Seq</code>이 필요로하는 인수들을 <code class="inline-code-span">assert</code>를 이용해서 만들어줬습니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Theorem</span> <span class="color-gold">CIf_congruence</span> <span class="color-white">:</span><span class="color-white"> forall b b&apos; c1 c1&apos; c2 c2&apos;</span><span class="color-white">,</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  bequiv b b&apos; </span><span class="color-white">-&gt;</span><span class="color-white"> cequiv c1 c1&apos; </span><span class="color-white">-&gt;</span><span class="color-white"> cequiv c2 c2&apos; </span><span class="color-white">-&gt;</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  cequiv </span><span class="color-white">&lt;</span><span class="color-white">{ </span><span class="color-violet">if</span><span class="color-white"> b </span><span class="color-violet">then</span><span class="color-white"> c1 </span><span class="color-violet">else</span><span class="color-white"> c2 end }</span><span class="color-white">&gt;</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">         <span class="color-white">&lt;</span><span class="color-white">{ </span><span class="color-violet">if</span><span class="color-white"> b&apos; </span><span class="color-violet">then</span><span class="color-white"> c1&apos; </span><span class="color-violet">else</span><span class="color-white"> c2&apos; end }</span><span class="color-white">&gt;.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  intros b b&apos; c1 c1&apos; c2 c2&apos; </span><span class="color-gold">H1</span> <span class="color-gold">H2</span> <span class="color-gold">H3</span><span class="color-white"> st st&apos;</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">  split;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">  intros </span><span class="color-gold">H4</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">  inversion </span><span class="color-gold">H4</span><span class="color-white">;
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">  subst</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> b -&gt; b&apos;, b = true </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H5</span><span class="color-white">:</span><span class="color-white"> beval st b&apos; </span><span class="color-white">=</span><span class="color-white"> true)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">    { rewrite </span><span class="color-white">&lt;-</span> <span class="color-gold">H8</span><span class="color-white">.</span><span class="color-white"> rewrite </span><span class="color-gold">H1</span><span class="color-white">.</span><span class="color-white"> reflexivity</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H6</span><span class="color-white">:</span><span class="color-white"> st </span><span class="color-white">=</span><span class="color-white">[ c1&apos; ]</span><span class="color-white">=&gt;</span><span class="color-white"> st&apos;)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-white">    { apply </span><span class="color-gold">H2</span><span class="color-white">.</span><span class="color-white"> apply </span><span class="color-gold">H9</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">E_IfTrue</span><span class="color-white"> st st&apos; b&apos; c1&apos; c2&apos; </span><span class="color-gold">H5</span> <span class="color-gold">H6</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> b -&gt; b&apos;, b = false </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H5</span><span class="color-white">:</span><span class="color-white"> beval st b&apos; </span><span class="color-white">=</span><span class="color-white"> false)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">    { rewrite </span><span class="color-white">&lt;-</span> <span class="color-gold">H8</span><span class="color-white">.</span><span class="color-white"> rewrite </span><span class="color-gold">H1</span><span class="color-white">.</span><span class="color-white"> reflexivity</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H6</span><span class="color-white">:</span><span class="color-white"> st </span><span class="color-white">=</span><span class="color-white">[ c2&apos; ]</span><span class="color-white">=&gt;</span><span class="color-white"> st&apos;)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">    { apply </span><span class="color-gold">H3</span><span class="color-white">.</span><span class="color-white"> apply </span><span class="color-gold">H9</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">E_IfFalse</span><span class="color-white"> st st&apos; b&apos; c1&apos; c2&apos; </span><span class="color-gold">H5</span> <span class="color-gold">H6</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> b&apos; -&gt; b, b&apos; = true </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H5</span><span class="color-white">:</span><span class="color-white"> beval st b </span><span class="color-white">=</span><span class="color-white"> true)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">    { rewrite </span><span class="color-white">&lt;-</span> <span class="color-gold">H8</span><span class="color-white">.</span><span class="color-white"> rewrite </span><span class="color-gold">H1</span><span class="color-white">.</span><span class="color-white"> reflexivity</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H6</span><span class="color-white">:</span><span class="color-white"> st </span><span class="color-white">=</span><span class="color-white">[ c1 ]</span><span class="color-white">=&gt;</span><span class="color-white"> st&apos;)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">    { apply </span><span class="color-gold">H2</span><span class="color-white">.</span><span class="color-white"> apply </span><span class="color-gold">H9</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">E_IfTrue</span><span class="color-white"> st st&apos; b c1 c2 </span><span class="color-gold">H5</span> <span class="color-gold">H6</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code">  <span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> b&apos; -&gt; b, b&apos; = false </span><span class="color-gray">-}</span><span class="color-white">*)
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H5</span><span class="color-white">:</span><span class="color-white"> beval st b </span><span class="color-white">=</span><span class="color-white"> false)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"><span class="color-white">    { rewrite </span><span class="color-white">&lt;-</span> <span class="color-gold">H8</span><span class="color-white">.</span><span class="color-white"> rewrite </span><span class="color-gold">H1</span><span class="color-white">.</span><span class="color-white"> reflexivity</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H6</span><span class="color-white">:</span><span class="color-white"> st </span><span class="color-white">=</span><span class="color-white">[ c2 ]</span><span class="color-white">=&gt;</span><span class="color-white"> st&apos;)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-white">    { apply </span><span class="color-gold">H3</span><span class="color-white">.</span><span class="color-white"> apply </span><span class="color-gold">H9</span><span class="color-white">.</span><span class="color-white"> }
</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"><span class="color-white">    apply (</span><span class="color-gold">E_IfFalse</span><span class="color-white"> st st&apos; b c1 c2 </span><span class="color-gold">H5</span> <span class="color-gold">H6</span><span class="color-white">)</span><span class="color-white">.</span>
</span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code">  <span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(4)">Copy</button></pre><p>이번에는 <code class="inline-code-span">if</code>에 대해서도 증명해보았습니다. 역시나 방식은 똑같습니다. 최종목표는 <code class="inline-code-span">E_IfTrue</code>와 <code class="inline-code-span">E_IfFalse</code>를 만드는 것인데, 거기에 필요한 인수들을 먼저 <code class="inline-code-span">assert</code>를 이용해서 만들고, 최종적으로 <code class="inline-code-span">E_IfTrue</code>/<code class="inline-code-span">E_IfFalse</code>를 만들어서 적용시켰습니다.</p><hr/><div class="align-center"><p><a href="index.html">메인으로 돌아가기</a></p></div><div class="align-left"><p>&lt;&lt; <a href="Chap13-1.html">Chapter 13-1. Behavioral Equivalence</a></p></div><div class="align-right"><p><a href="Chap13-3.html">Chapter 13-3. Program Transformation</a> &gt;&gt;</p></div><script>/*<![CDATA[*/
const fenced_code_block_contents = ["Lemma refl_aequiv : forall (a : aexp),\n  aequiv a a.\nProof.\n  intros a st.\n  reflexivity.\n  Qed.\n\nLemma sym_aequiv : forall (a1 a2 : aexp),\n  aequiv a1 a2 -> aequiv a2 a1.\nProof.\n  intros a1 a2 H st.\n  symmetry.\n  apply H.\n  Qed.\n\nLemma trans_aequiv : forall (a1 a2 a3 : aexp),\n  aequiv a1 a2 -> aequiv a2 a3 -> aequiv a1 a3.\nProof.\n  unfold aequiv.\n  intros a1 a2 a3 H12 H23 st.\n  rewrite (H12 st).\n  rewrite (H23 st).\n  reflexivity.\n  Qed.\n\nLemma refl_bequiv : forall (b : bexp),\n  bequiv b b.\nProof.\n  intros b st.\n  reflexivity.\n  Qed.\n\nLemma sym_bequiv : forall (b1 b2 : bexp),\n  bequiv b1 b2 -> bequiv b2 b1.\nProof.\n  intros b1 b2 H st.\n  symmetry.\n  apply H.\n  Qed.\n\nLemma trans_bequiv : forall (b1 b2 b3 : bexp),\n  bequiv b1 b2 -> bequiv b2 b3 -> bequiv b1 b3.\nProof.\n  intros b1 b2 b3 H12 H23 st.\n  rewrite (H12 st).\n  rewrite (H23 st).\n  reflexivity.\n  Qed.\n\nLemma refl_cequiv : forall (c : com),\n  cequiv c c.\nProof.\n  intros c st st'.\n  reflexivity.\n  Qed.\n\nLemma sym_cequiv : forall (c1 c2 : com),\n  cequiv c1 c2 -> cequiv c2 c1.\nProof.\n  unfold cequiv.\n  intros c1 c2 H st st'.\n  rewrite H.\n  reflexivity.\n  Qed.\n\nLemma trans_cequiv : forall (c1 c2 c3 : com),\n  cequiv c1 c2 -> cequiv c2 c3 -> cequiv c1 c3.\nProof.\n  unfold cequiv.\n  intros c1 c2 c3 H12 H23 st st'.\n  rewrite H12.\n  apply H23.\n  Qed.", "", "Theorem CAsgn_congruence : forall x a a',\n  aequiv a a' ->\n  cequiv <{x := a}> <{x := a'}>.\nProof.\n  intros x a a' H st st'.\n  split;\n  intros H2;\n  inversion H2;\n  subst;\n  apply E_Asgn;\n  rewrite H;\n  reflexivity.\n  Qed.", "Theorem CSeq_congruence : forall c1 c1' c2 c2',\n  cequiv c1 c1' -> cequiv c2 c2' -> cequiv <{ c1;c2 }> <{ c1';c2' }>.\nProof.\n  intros c1 c1' c2 c2' H1 H2 st st'.\n  split;\n  intros H3;\n  inversion H3;\n  subst.\n  - (*{- c1 -> c1' -}*)\n    assert (H5: st =[ c1' ]=> st'0).\n      { apply H1. apply H4. }\n    assert (H6: st'0 =[ c2' ]=> st').\n      { apply H2. apply H7. }\n    apply (E_Seq c1' c2' st st'0 st' H5 H6).\n  - (*{- c1' -> c1 -}*)\n    assert (H5: st =[ c1 ]=> st'0).\n      { apply H1. apply H4. }\n    assert (H6: st'0 =[ c2 ]=> st').\n      { apply H2. apply H7. }\n    apply (E_Seq c1 c2 st st'0 st' H5 H6).\n  Qed.", "Theorem CIf_congruence : forall b b' c1 c1' c2 c2',\n  bequiv b b' -> cequiv c1 c1' -> cequiv c2 c2' ->\n  cequiv <{ if b then c1 else c2 end }>\n         <{ if b' then c1' else c2' end }>.\nProof.\n  intros b b' c1 c1' c2 c2' H1 H2 H3 st st'.\n  split;\n  intros H4;\n  inversion H4;\n  subst.\n  - (*{- b -> b', b = true -}*)\n    assert (H5: beval st b' = true).\n    { rewrite <- H8. rewrite H1. reflexivity. }\n    assert (H6: st =[ c1' ]=> st').\n    { apply H2. apply H9. }\n    apply (E_IfTrue st st' b' c1' c2' H5 H6).\n  - (*{- b -> b', b = false -}*)\n    assert (H5: beval st b' = false).\n    { rewrite <- H8. rewrite H1. reflexivity. }\n    assert (H6: st =[ c2' ]=> st').\n    { apply H3. apply H9. }\n    apply (E_IfFalse st st' b' c1' c2' H5 H6).\n  - (*{- b' -> b, b' = true -}*)\n    assert (H5: beval st b = true).\n    { rewrite <- H8. rewrite H1. reflexivity. }\n    assert (H6: st =[ c1 ]=> st').\n    { apply H2. apply H9. }\n    apply (E_IfTrue st st' b c1 c2 H5 H6).\n  - (*{- b' -> b, b' = false -}*)\n    assert (H5: beval st b = false).\n    { rewrite <- H8. rewrite H1. reflexivity. }\n    assert (H6: st =[ c2 ]=> st').\n    { apply H3. apply H9. }\n    apply (E_IfFalse st st' b c1 c2 H5 H6).\n  Qed."];

function copy_code_to_clipboard(index) {
    navigator.clipboard.writeText(fenced_code_block_contents[index]);
}/*]]>*/</script>
        <a id="bottom"></a>
    </article>




    <footer class="markdown">
<p><br/></p><p><br/></p><hr/><div class="align-center"><p>2021 ~ 2023 &copy; Baehyunsol</p></div>
    </footer>


    <script src="colors.js"></script>

    
    <script src="nav.js"></script>
    
    
    
    <script src="header.js"></script>
    
<script src="collapsible_tables.js"></script></body>

</html>