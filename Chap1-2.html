<!DOCTYPE html><html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    
    <title>Chap1-2</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" rel="stylesheet"/> 
    
    <link href="page.css" rel="stylesheet"/><link href="markdown.css" rel="stylesheet"/><link href="nav.css" rel="stylesheet"/><link href="header.css" rel="stylesheet"/><link href="footer.css" rel="stylesheet"/>
    
</head>

<body>


    <header>
<p><a href="index.html">Home</a></p>
    </header>



    <nav>
<p><a id="settingsopenbutton">&#9728;</a><a href="#top">&#9650;</a><a href="#bottom">&#9660;</a></p><div id="settingsmenubg"><p><div id="settingsmenu"> <a id="settingsclosebutton">&#10006;</a> <a id="changethemebutton">Set Light Theme</a> <a id="loosepaddingbutton">&#8592; &#8594;</a> <a id="tightpaddingbutton">&#8594; &#8592;</a> </div></p></div>
    </nav>


    <article class="markdown">
        <a id="top"></a>
<table><thead id="table-collapse-toggle-0" class="collapsible collapsed" onclick="collapse_table('0')"><tr><th> Table of Contents </th></tr></thead><tbody id="collapsible-table-0" class="invisible"><tr><td><div class="toc"><ol type="1"><li><a href="#natural-numbers">Natural Numbers</a><ol type="1"><li><a href="#정의">정의</a></li><li><a href="#기본-연산">기본 연산</a><ol type="1"><li><a href="#minus_two">minus_two</a></li><li><a href="#is_even">is_even</a></li><li><a href="#plus">plus</a></li><li><a href="#mult">mult</a></li><li><a href="#minus">minus</a></li><li><a href="#eqb">eqb</a></li><li><a href="#leb">leb</a></li><li><a href="#notation"><code class="inline-code-span">Notation</code></a></li></ol></li></ol></li></ol></div></td></tr></tbody></table><h1 id="natural-numbers">Natural Numbers</h1><p>첫 장을 읽으시면서 이상한 점을 느끼는 분들이 많으셨을 겁니다. 보통 프로그래밍 언어를 처음 배울 때, 그 언어의 정수 자료형, 정수 연산자 등을 배우고 시작하지만, Coq에서는 정수에 대한 언급이 전혀 없었습니다. 심지어 <code class="inline-code-span">==</code> 같은 연산자도 아직 안 나왔습니다.</p><p>Coq에서는 정수형을 아주 특이한 방식으로 다룹니다. 이번 장에서는 Coq에서 자연수를 어떻게 다루는지 살펴보겠습니다.</p><h2 id="정의">정의</h2><p>Boolean이 그러했듯, 자연수도 특별한 컴파일러 내장함수를 쓰지 않고 Coq의 문법으로 정의할 수 있습니다. 지금까지 봤던 type들과 달리, 자연수는 무한히 많으므로 특별한 방식의 정의를 사용합니다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Inductive</span><span class="color-white"> nat </span><span class="color-white">:</span><span class="color-white"> </span><span class="color-gold">Type</span><span class="color-white"> </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (n</span><span class="color-white">:</span><span class="color-white"> nat)</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(0)">Copy</button></pre><p>정의에서 <code class="inline-code-span">O</code>는 숫자 0을 나타내고, <code class="inline-code-span">S n</code>은 0이 아닌 수를 나타냅니다. <code class="inline-code-span">S</code>는 <u>S</u>ang-sok-ja의 머릿말로, <code class="inline-code-span">S n</code>은 <code class="inline-code-span">n</code> 다음의 수를 나타냅니다. 즉, <code class="inline-code-span">S O</code>는 <code class="inline-code-span">O</code> 다음의 수, 즉 1을 나타내고, <code class="inline-code-span">S (S O)</code>는 <code class="inline-code-span">O</code> 다음다음의 수, 즉 2를 나타냅니다. 페아노 공리계에서 자연수를 정의하는 방식과 비슷합니다.<sup id="footnote-ref-0"><a href="#footnote-cite-0">[0]</a></sup></p><p>이 방법으로 우리는 모든 자연수를 표현할 수 있습니다! 지금까지 보던 방식과 많이 다르죠?</p><div class="box"><p>TODO:</p><p>책에서 중요하게 설명하는 부분이 있는데 왜 강조하는지 모르겠네요. 일단 받아적겠습니다.</p><blockquote><code class="inline-code-span">nat</code>을 구성하는 방법은 오직 <code class="inline-code-span">O</code>와 <code class="inline-code-span">S n</code>밖에 없고, <code class="inline-code-span">O</code>와 <code class="inline-code-span">S n</code>은 항상 <code class="inline-code-span">nat</code>이다. </blockquote><p>저 말이 <code class="inline-code-span">Inductive</code>라는 키워드의 의미와 중요하게 연관이 있는 것 같습니다. 책을 좀 더 읽으면서 살펴보겠습니다.</p></div><div class="box"><p>프로그래밍 언어적인 관점에서 보자면, 위에서 정의한 <code class="inline-code-span">S</code>는 <code class="inline-code-span">nat -&gt; nat</code>의 type을 가지는 함수입니다. Haskell에서 type을 만들면 동일한 이름으로 constructor가 생기는 것과 동일하게 생각하면 됩니다.</p></div><h2 id="기본-연산">기본 연산</h2><h3 id="minus_two">minus_two</h3><p>Coq가 자연수를 어떻게 <em><strong>표현</strong></em>하는지 살펴보았습니다. 지금까지 본 것은 representation에 불과합니다. 저걸 자연수로 받아들이려면 자연수의 여러 연산들을 구현해야합니다. <code class="inline-code-span">S</code>와 <code class="inline-code-span">O</code>만 정의했기 때문에 숫자 0과 (+ 1)함수만을 이용해서 모든 연산을 정의해야합니다. 재밌겠죠?</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Definition</span><span class="color-white"> minus_two (n</span><span class="color-white">:</span><span class="color-white"> nat) </span><span class="color-white">:</span><span class="color-white"> nat </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match n with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">O</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">O</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> n&apos;) </span><span class="color-white">=&gt;</span><span class="color-white"> n&apos;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(1)">Copy</button></pre><p>주어진 수에서 2를 빼는 함수를 정의했습니다. 0 혹은 1은 0을 반환하고, (n + 2)는 n을 반환하도록 했습니다.</p><h3 id="is_even">is_even</h3><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> is_even (n</span><span class="color-white">:</span><span class="color-white"> nat) </span><span class="color-white">:</span><span class="color-white"> bool </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match n with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> true</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> false</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> n&apos;) </span><span class="color-white">=&gt;</span><span class="color-white"> is_even n&apos;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(2)">Copy</button></pre><p>주어진 수가 짝수인지 홀수인지 판별하는 함수를 정의했습니다. 0은 짝수이고 1은 홀수이며, (n + 2)는 n과 동일한 결과를 반환하도록 했습니다.</p><p><a id="keywordfixpoint"></a> 이번에는 함수 정의에 <code class="inline-code-span">Definition</code>이 아닌 <code class="inline-code-span">Fixpoint</code>라는 키워드를 사용했습니다. 이는 <code class="inline-code-span">is_even</code>이 재귀함수이기 때문입니다. <code class="inline-code-span">Definition</code> 키워드를 사용하면 <code class="inline-code-span">is_even</code>이 정의가 덜 된 상태에서 함수 body 안에서 <code class="inline-code-span">is_even</code>을 만나게 되고, 컴파일러는 아직 정의되지 않은 이름을 만나서 당황하게 됩니다.</p><div class="box"><p>TODO:</p><p>책의 Fixpoints and Structural Recursion (Optional)라는 파트를 보면, <code class="inline-code-span">Fixpoint</code>를 이용해서 정의된 함수들은 컴파일 타임에 &quot;decreasing analysis&quot;를 한다고 돼 있습니다. 즉, 이 함수가 무한 recursion을 할지 언젠가 terminate를 할지 검사를 한다는 건데, 그게 불가능하지 않나...요..? Halting problem이랑 다른 얘긴가?</p></div><p><a id="ex1"></a></p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Example</span><span class="color-white"> test_even1</span><span class="color-white">:</span><span class="color-white"> is_even </span><span class="color-gold">2</span><span class="color-white"> </span><span class="color-white">=</span><span class="color-white"> true</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span><span class="color-white"> simpl</span><span class="color-white">.</span><span class="color-white"> reflexivity</span><span class="color-white">.</span><span class="color-white"> </span><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-gold">Example</span><span class="color-white"> test_even2</span><span class="color-white">:</span><span class="color-white"> is_even </span><span class="color-gold">5</span><span class="color-white"> </span><span class="color-white">=</span><span class="color-white"> false</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span><span class="color-white"> simpl</span><span class="color-white">.</span><span class="color-white"> reflexivity</span><span class="color-white">.</span><span class="color-white"> </span><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(3)">Copy</button></pre><p>방금 만든 함수들이 제대로 동작하는지 검사하는 코드입니다.<sup id="footnote-ref-1"><a href="#footnote-cite-1">[1]</a></sup> 저기서 나오는 키워드들이 무슨 뜻인지는 <a href="Chap1-3.html">다음 장</a>에 자세히 설명돼 있습니다.</p><h3 id="plus">plus</h3><p><a id="functionnatplus"></a></p><p>이제 본격적으로 사칙연산을 구현해보겠습니다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> plus (n </span><span class="color-white">:</span><span class="color-white"> nat) (m </span><span class="color-white">:</span><span class="color-white"> nat) </span><span class="color-white">:</span><span class="color-white"> nat </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match n with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> m</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> n&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (plus n&apos; m)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(4)">Copy</button></pre><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-white">plus (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">))) (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">)))      (*</span><span class="color-gray">{-</span><span class="color-gray"> plus 3 3 </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (plus (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">))) (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">)))    (*</span><span class="color-gray">{-</span><span class="color-gray"> S (plus 3 2) </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (plus (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">))) (</span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">)))    (*</span><span class="color-gray">{-</span><span class="color-gray"> S S (plus 3 1) </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (plus (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">))) </span><span class="color-gold">O</span><span class="color-white">)))    (*</span><span class="color-gray">{-</span><span class="color-gray"> S S S (plus 3 0) </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> (</span><span class="color-gold">S</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">)))))             (*</span><span class="color-gray">{-</span><span class="color-gray"> S S S S S S </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(5)">Copy</button></pre><p><code class="inline-code-span">plus</code> 함수가 어떻게 동작하는지 알기 쉽도록 나타내보았습니다. <code class="inline-code-span">m + n</code>을 하게되면 <code class="inline-code-span">n</code>을 감싸고 있는 <code class="inline-code-span">S</code>를 하나 꺼내서 <code class="inline-code-span">plus</code> 바깥쪽에 씌웁니다. 그럼 전체 <code class="inline-code-span">S</code>의 개수는 보존이 되고, 종국에는 <code class="inline-code-span">plus</code>가 사라지고 <code class="inline-code-span">S</code>와 <code class="inline-code-span">O</code>만 남게 됩니다.</p><h3 id="mult">mult</h3><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> mult (n m </span><span class="color-white">:</span><span class="color-white"> nat) </span><span class="color-white">:</span><span class="color-white"> nat </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match n with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">                        (*</span><span class="color-gray">{-</span><span class="color-gray"> 0 * m = 0 </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> n&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> plus m (mult n&apos; m)    (*</span><span class="color-gray">{-</span><span class="color-gray"> (n + 1) * m = m + (n * m) </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(6)">Copy</button></pre><p>인수 목록을 <code class="inline-code-span">(m : nat) (n : nat)</code>으로 쓰지 않고 <code class="inline-code-span">(m n : nat)</code>으로 쓴 걸 보실 수 있습니다. 모든 인수가 동일한 type을 가지면 위와 같이 축약해서 쓸 수 있습니다. <a href="Chap1-1.html#concepttuple">이전</a>에 tuple에서 봤던 표기와 비슷하죠?</p><h3 id="minus">minus</h3><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> minus (n m </span><span class="color-white">:</span><span class="color-white"> nat) </span><span class="color-white">:</span><span class="color-white"> nat </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match n</span><span class="color-white">,</span><span class="color-white"> m with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">,</span><span class="color-white"> _ </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white">      (*</span><span class="color-gray">{-</span><span class="color-gray"> 음수는 없습니다. </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> _ </span><span class="color-white">,</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> m</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> n&apos;</span><span class="color-white">,</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> m&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> minus n&apos; m&apos;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(7)">Copy</button></pre><p>책에서는 4번 라인을 <code class="inline-code-span">| S _ , O =&gt; n</code>라고 했던데 뭐가 다른지 모르겠네요.</p><h3 id="eqb">eqb</h3><p>사칙연산이 그러했듯 등호도 내장함수가 아닌 Coq의 일반적인 문법으로 구현이 돼 있습니다. 그 형태가 아름다우니 보고 지나가겠습니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> eqb (n m </span><span class="color-white">:</span><span class="color-white"> nat) </span><span class="color-white">:</span><span class="color-white"> bool </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match n with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> match m with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">    </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> true</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">    </span><span class="color-white">|</span><span class="color-white"> _ </span><span class="color-white">=&gt;</span><span class="color-white"> false</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">    end</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> n&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> match m with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">    </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> false</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">    </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> m&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> eqb n&apos; m&apos;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">    end</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(8)">Copy</button></pre><p>책에서는 5번 라인을 <code class="inline-code-span">| S m&apos; =&gt; false</code>라고 했던데 뭐가 다른지 모르겠네요.</p><h3 id="leb">leb</h3><p>마지막으로 less or equal to의 구현을 살펴보겠습니다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> leb (m n </span><span class="color-white">:</span><span class="color-white"> nat) </span><span class="color-white">:</span><span class="color-white"> bool </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match m with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> true</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> m&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> match n with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">    </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> false</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">    </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> n&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> leb m&apos; n&apos;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    end</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(9)">Copy</button></pre><h3 id="notation"><code class="inline-code-span">Notation</code></h3><p><a id="keywordnotation2"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Notation</span><span class="color-white"> </span><span class="color-white">&quot;</span><span class="color-green">x + y</span><span class="color-white">&quot;</span><span class="color-white"> </span><span class="color-white">:=</span><span class="color-white"> (plus x y)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">                       (at level </span><span class="color-gold">50</span><span class="color-white">,</span><span class="color-white"> left associativity)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">                       </span><span class="color-white">:</span><span class="color-white"> nat_scope</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-gold">Notation</span><span class="color-white"> </span><span class="color-white">&quot;</span><span class="color-green">x - y</span><span class="color-white">&quot;</span><span class="color-white"> </span><span class="color-white">:=</span><span class="color-white"> (minus x y)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">                       (at level </span><span class="color-gold">50</span><span class="color-white">,</span><span class="color-white"> left associativity)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">                       </span><span class="color-white">:</span><span class="color-white"> nat_scope</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-gold">Notation</span><span class="color-white"> </span><span class="color-white">&quot;</span><span class="color-green">x * y</span><span class="color-white">&quot;</span><span class="color-white"> </span><span class="color-white">:=</span><span class="color-white"> (mult x y)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">                       (at level </span><span class="color-gold">40</span><span class="color-white">,</span><span class="color-white"> left associativity)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">                       </span><span class="color-white">:</span><span class="color-white"> nat_scope</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-gold">Notation</span><span class="color-white"> </span><span class="color-white">&quot;</span><span class="color-green">x =? y</span><span class="color-white">&quot;</span><span class="color-white"> </span><span class="color-white">:=</span><span class="color-white"> (eqb x y) (at level </span><span class="color-gold">70</span><span class="color-white">) </span><span class="color-white">:</span><span class="color-white"> nat_scope</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-gold">Notation</span><span class="color-white"> </span><span class="color-white">&quot;</span><span class="color-green">x &lt;=? y</span><span class="color-white">&quot;</span><span class="color-white"> </span><span class="color-white">:=</span><span class="color-white"> (leb x y) (at level </span><span class="color-gold">70</span><span class="color-white">) </span><span class="color-white">:</span><span class="color-white"> nat_scope</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(10)">Copy</button></pre><p><code class="inline-code-span">Notation</code> 키워드가 다시 등장했는데, 이번에는 새로운 syntax가 추가되었습니다. Haskell에서도 중위연산자를 정의하고 그 연산자의 우선순위를 지정해줄 수 있듯, Coq에서도 우선순위를 정할 수 있습니다. 위의 예제에서는 곱셈이 덧셈에 우선하고, 덧셈이 비교에 우선하도록 정의하였는데 이는 일상생활에서 쓰이는 연산자의 우선순위와 일치합니다.</p><p>이제 저희는 2종류의 등호 연산자를 알게되었습니다. <code class="inline-code-span">=</code>와 <code class="inline-code-span">=?</code>인데, 둘은 성질이 조금 다릅니다. <code class="inline-code-span">=?</code>은 다른 프로그래밍 언어의 <code class="inline-code-span">==</code>와 비슷합니다. Expression, 즉 값입니다. <code class="inline-code-span">=</code>는 명제들 간에 쓰는 연산자로, 저희가 증명하려는 것들에 해당합니다.<sup id="footnote-ref-2"><a href="#footnote-cite-2">[2]</a></sup></p><hr/><div class="align-center"><p><a href="index.html">메인으로 돌아가기</a></p></div><div class="align-left"><p>&lt;&lt; <a href="Chap1-1.html">Chap1-1. Basic Syntax</a></p></div><div class="align-right"><p><a href="Chap1-3.html">Chap1-3. Proofs</a> &gt;&gt;</p></div><hr class="footnote-hr"/><div class="mdxt-footnote-cites"><p><div class="footnote-cite"><a id="footnote-cite-0"></a>0. <a href="#footnote-ref-0"> [0]</a> 제가 수학 전공자가 아니라서 자세히는 모릅니다.</div><div class="footnote-cite"><a id="footnote-cite-1"></a>1. <a href="#footnote-ref-1"> [1]</a> 이렇게만 놓고 보면 unit test와 비슷한 역할인 거 같은데 확실치 않습니다. 좀 더 공부해보고 다시 정리하겠습니다.</div><div class="footnote-cite"><a id="footnote-cite-2"></a>2. <a href="#footnote-ref-2"> [2]</a> 책에서는 <code class="inline-code-span">x = y</code> <em>is a logical claim that we can try to prove</em>라고 언급했습니다.</div></p></div><script>/*<![CDATA[*/
const fenced_code_block_contents = ["Inductive nat : Type :=\n  | O\n  | S (n: nat).", "Definition minus_two (n: nat) : nat :=\n  match n with\n  | O => O\n  | S O => O\n  | S (S n') => n'\n  end.", "Fixpoint is_even (n: nat) : bool :=\n  match n with\n  | O => true\n  | S O => false\n  | S (S n') => is_even n'\n  end.", "Example test_even1: is_even 2 = true.\nProof. simpl. reflexivity. Qed.\nExample test_even2: is_even 5 = false.\nProof. simpl. reflexivity. Qed.", "Fixpoint plus (n : nat) (m : nat) : nat :=\n  match n with\n  | O => m\n  | S n' => S (plus n' m)\n  end.", "plus (S (S (S O))) (S (S (S O)))      (*{- plus 3 3 -}*)\n= S (plus (S (S (S O))) (S (S O)))    (*{- S (plus 3 2) -}*)\n= S (S (plus (S (S (S O))) (S O)))    (*{- S S (plus 3 1) -}*)\n= S (S (S (plus (S (S (S O))) O)))    (*{- S S S (plus 3 0) -}*)\n= S (S (S (S (S (S O)))))             (*{- S S S S S S -}*)", "Fixpoint mult (n m : nat) : nat :=\n  match n with\n  | O => O                        (*{- 0 * m = 0 -}*)\n  | S n' => plus m (mult n' m)    (*{- (n + 1) * m = m + (n * m) -}*)\n  end.", "Fixpoint minus (n m : nat) : nat :=\n  match n, m with\n  | O , _ => O      (*{- 음수는 없습니다. -}*)\n  | _ , O => m\n  | S n', S m' => minus n' m'\n  end.", "Fixpoint eqb (n m : nat) : bool :=\n  match n with\n  | O => match m with\n    | O => true\n    | _ => false\n    end\n  | S n' => match m with\n    | O => false\n    | S m' => eqb n' m'\n    end\n  end.", "Fixpoint leb (m n : nat) : bool :=\n  match m with\n  | O => true\n  | S m' => match n with\n    | O => false\n    | S n' => leb m' n'\n    end\n  end.", "Notation \"x + y\" := (plus x y)\n                       (at level 50, left associativity)\n                       : nat_scope.\nNotation \"x - y\" := (minus x y)\n                       (at level 50, left associativity)\n                       : nat_scope.\nNotation \"x * y\" := (mult x y)\n                       (at level 40, left associativity)\n                       : nat_scope.\nNotation \"x =? y\" := (eqb x y) (at level 70) : nat_scope.\nNotation \"x <=? y\" := (leb x y) (at level 70) : nat_scope."];

function copy_code_to_clipboard(index) {
    navigator.clipboard.writeText(fenced_code_block_contents[index]);
}/*]]>*/</script>
        <a id="bottom"></a>
    </article>




    <footer class="markdown">
<p><br/></p><p><br/></p><hr/><div class="align-center"><p>2021 ~ 2022 (c) Baehyunsol</p><p>Powered by <a href="https://github.com/baehyunsol/MDxt">MDxt</a></p></div>
    </footer>


    <script src="colors.js"></script>

    
    <script src="nav.js"></script>
    
<script src="collapsible_tables.js"></script></body>

</html>