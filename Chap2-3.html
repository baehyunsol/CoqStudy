<!DOCTYPE html><html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    
    <title>Chap2-3</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" rel="stylesheet"/> 
    
    <link href="page.css" rel="stylesheet"/><link href="markdown.css" rel="stylesheet"/><link href="nav.css" rel="stylesheet"/><link href="header.css" rel="stylesheet"/><link href="footer.css" rel="stylesheet"/>
    
</head>

<body>


    <header>
<p><a href="index.html">Home</a></p>
    </header>



    <nav>
<p><a id="settingsopenbutton">&#9728;</a><a href="#top">&#9650;</a><a href="#bottom">&#9660;</a></p><div id="settingsmenubg"><p><div id="settingsmenu"> <a id="settingsclosebutton">&#10006;</a> <a id="changethemebutton">Set Light Theme</a> <a id="loosepaddingbutton">&#8592; &#8594;</a> <a id="tightpaddingbutton">&#8594; &#8592;</a> </div></p></div>
    </nav>


    <article class="markdown">
        <a id="top"></a>
<table><thead id="table-collapse-toggle-0" class="collapsible collapsed" onclick="collapse_table('0')"><tr><th> Table of Contents </th></tr></thead><tbody id="collapsible-table-0" class="invisible"><tr><td><div class="toc"><ol type="1"><li><a href="#binary">Binary</a><ol type="1"><li><a href="#정의">정의</a></li><li><a href="#incr">incr</a></li><li><a href="#bin_to_nat">bin_to_nat</a></li><li><a href="#검증1">검증1</a></li><li><a href="#nat_to_bin">nat_to_bin</a></li><li><a href="#검증2">검증2</a></li></ol></li></ol></div></td></tr></tbody></table><h1 id="binary">Binary</h1><p>지금까지 배운 내용들을 종합하여 이진법을 구현해보는 챕터입니다.</p><h2 id="정의">정의</h2><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Inductive</span><span class="color-white"> bin </span><span class="color-white">:</span><span class="color-white"> </span><span class="color-gold">Type</span><span class="color-white"> </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">Z</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">B0</span><span class="color-white"> (n </span><span class="color-white">:</span><span class="color-white"> bin)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">B1</span><span class="color-white"> (n </span><span class="color-white">:</span><span class="color-white"> bin)</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(0)">Copy</button></pre><p>이진법을 위와 같이 정의했습니다. 각 자릿수는 0 혹은 1의 값을 가지며, 다음 자리수와 연결돼 있습니다. 마지막에는 이진법 표기가 끝났다는 뜻의 <code class="inline-code-span">Z</code>를 붙입니다. 아래 표를 보면 예제의 이진법 구현을 더 쉽게 이해할 수 있습니다.</p><table><thead><tr><th> decimal </th><th> binary                </th><th> unary                  </th></tr></thead><tbody><tr><td> 0       </td><td> Z                     </td><td> O                      </td></tr><tr><td> 1       </td><td> B<sub>1</sub> Z                </td><td> S O                    </td></tr><tr><td> 2       </td><td> B<sub>0</sub> (B<sub>1</sub> Z)         </td><td> S (S O)                </td></tr><tr><td> 3       </td><td> B<sub>1</sub> (B<sub>1</sub> Z)         </td><td> S (S (S O))            </td></tr><tr><td> 4       </td><td> B<sub>0</sub> (B<sub>0</sub> (B<sub>1</sub> Z))  </td><td> S (S (S (S O)))        </td></tr><tr><td> 5       </td><td> B<sub>1</sub> (B<sub>0</sub> (B<sub>1</sub> Z))  </td><td> S (S (S (S (S O))))    </td></tr></tbody></table><p>보통의 이진법표기는 MSB<sup id="footnote-ref-0"><a href="#footnote-cite-0">[0]</a></sup>가 가장 왼쪽으로 오지만, 여기서는 LSB<sup id="footnote-ref-1"><a href="#footnote-cite-0">[1]</a></sup>가 가장 왼쪽으로 옵니다. 이는 구현의 편리함을 위함입니다.</p><h2 id="incr">incr</h2><p><code class="inline-code-span">incr</code>는 이진법을 다루는 가장 간단한 함수로, 주어진 수에 1을 더해서 반환합니다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> incr (b</span><span class="color-white">:</span><span class="color-white"> bin) </span><span class="color-white">:</span><span class="color-white"> bin </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match b with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">Z</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">B1</span><span class="color-white"> </span><span class="color-gold">Z</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">B0</span><span class="color-white"> b&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">B1</span><span class="color-white"> b&apos;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">B1</span><span class="color-white"> b&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">B0</span><span class="color-white"> (incr b&apos;)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(1)">Copy</button></pre><p>구현은 위와 같이 아주 간단합니다. 0에다가 1을 더하면 1이고, LSB가 0일 경우 LSB를 1로 바꿔주며, LSB가 1일 경우 0으로 바꾸고 받아올림<sup id="footnote-ref-2"><a href="#footnote-cite-1">[2]</a></sup>을 합니다.</p><p><a id="keywordexample"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Example</span><span class="color-white"> test_bin_incr1 </span><span class="color-white">:</span><span class="color-white"> (incr (</span><span class="color-gold">B1</span><span class="color-white"> </span><span class="color-gold">Z</span><span class="color-white">)) </span><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">B0</span><span class="color-white"> (</span><span class="color-gold">B1</span><span class="color-white"> </span><span class="color-gold">Z</span><span class="color-white">)</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white"> </span><span class="color-gold">Example</span><span class="color-white"> test_bin_incr2 </span><span class="color-white">:</span><span class="color-white"> (incr (</span><span class="color-gold">B0</span><span class="color-white"> (</span><span class="color-gold">B1</span><span class="color-white"> </span><span class="color-gold">Z</span><span class="color-white">))) </span><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">B1</span><span class="color-white"> (</span><span class="color-gold">B1</span><span class="color-white"> </span><span class="color-gold">Z</span><span class="color-white">)</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white"> </span><span class="color-gold">Example</span><span class="color-white"> test_bin_incr3 </span><span class="color-white">:</span><span class="color-white"> (incr (</span><span class="color-gold">B1</span><span class="color-white"> (</span><span class="color-gold">B1</span><span class="color-white"> </span><span class="color-gold">Z</span><span class="color-white">))) </span><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">B0</span><span class="color-white"> (</span><span class="color-gold">B0</span><span class="color-white"> (</span><span class="color-gold">B1</span><span class="color-white"> </span><span class="color-gold">Z</span><span class="color-white">))</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">  reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(2)">Copy</button></pre><p>위와 같은 코드로 간단히 unit test를 할 수 있습니다. 물론 unit test가 코드를 <em>검증</em>하는 수단은 아니라는 것을 유념하시기 바랍니다. Coq를 이용한 formal한 검증은 <a href="#검증1">아래</a>에서 확인할 수 있습니다.</p><h2 id="bin_to_nat">bin_to_nat</h2><p>말그대로 <code class="inline-code-span">bin</code> type의 instance를 <code class="inline-code-span">nat</code> type으로 바꿔주는 함수입니다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> bin_to_nat (b</span><span class="color-white">:</span><span class="color-white"> bin) </span><span class="color-white">:</span><span class="color-white"> nat </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match b with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">Z</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">O</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">B0</span><span class="color-white"> b&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">2</span><span class="color-white"> * (bin_to_nat b&apos;)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">B1</span><span class="color-white"> b&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">1</span><span class="color-white"> </span><span class="color-white">+</span><span class="color-white"> </span><span class="color-gold">2</span><span class="color-white"> * (bin_to_nat b&apos;)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(3)">Copy</button></pre><p>이진법의 정의를 그대로 코드로 옮겨놨습니다.</p><h2 id="검증1">검증1</h2><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-white">(*</span><span class="color-gray">{-</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">                            incr</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-gray">              bin ----------------------&gt; bin</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-gray">               |                           |</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-gray">    bin_to_nat |                           |  bin_to_nat</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-gray">               |                           |</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-gray">               v                           v</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-gray">              nat ----------------------&gt; nat</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-gray">                             S</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-gold">Theorem</span><span class="color-white"> bin_to_nat_incr </span><span class="color-white">:</span><span class="color-white"> forall b</span><span class="color-white">:</span><span class="color-white"> bin</span><span class="color-white">,</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">  bin_to_nat (incr b) </span><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">1</span><span class="color-white"> </span><span class="color-white">+</span><span class="color-white"> bin_to_nat b</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(4)">Copy</button></pre><p>위의 theorem을 증명해봅시다. 물론 저 theorem이 맞다고 해서 <code class="inline-code-span">incr</code>과 <code class="inline-code-span">bin_to_nat</code>에 문제가 없다고 완벽히 장담할 순 없지만, <a href="#keywordexample">이전</a>의 unit test보다는 훨씬 설득력이 있습니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Theorem</span><span class="color-white"> bin_to_nat_incr </span><span class="color-white">:</span><span class="color-white"> forall b</span><span class="color-white">:</span><span class="color-white"> bin</span><span class="color-white">,</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  bin_to_nat (incr b) </span><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">1</span><span class="color-white"> </span><span class="color-white">+</span><span class="color-white"> bin_to_nat b</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  intros b</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  induction b as [ </span><span class="color-white">|</span><span class="color-white"> b0&apos; </span><span class="color-gold">IHb0</span><span class="color-white">&apos;</span><span class="color-white">|</span><span class="color-white"> b1&apos; </span><span class="color-gold">IHb1</span><span class="color-white">&apos;]</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> b = Z </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> b = B0 b0&apos; </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">    reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> b = B1 b1&apos; </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">    simpl</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">    rewrite add_0_r</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">    rewrite add_0_r</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">    rewrite </span><span class="color-gold">IHb1</span><span class="color-white">&apos;</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-white">    simpl</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">    assert (</span><span class="color-gold">H</span><span class="color-white">:</span><span class="color-white"> forall n m </span><span class="color-white">:</span><span class="color-white"> nat</span><span class="color-white">,</span><span class="color-white"> n </span><span class="color-white">+</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> m </span><span class="color-white">=</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> (n </span><span class="color-white">+</span><span class="color-white"> m))</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">    {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">      intros m n</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">      induction m as [ </span><span class="color-white">|</span><span class="color-white"> m&apos; </span><span class="color-gold">IHm</span><span class="color-white">&apos;]</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">      </span><span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> m = 0 </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">        reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">      </span><span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> m = S m&apos; </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">        simpl</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code"><span class="color-white">        rewrite </span><span class="color-white">&lt;-</span><span class="color-white"> </span><span class="color-gold">IHm</span><span class="color-white">&apos;</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">        reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">    rewrite </span><span class="color-gold">H</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-white">    reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(5)">Copy</button></pre><p>의식의 흐름대로 증명한지라 증명이 좀 더럽습니다.</p><h2 id="nat_to_bin">nat_to_bin</h2><p>이번에는 반대로 <code class="inline-code-span">nat</code>을 <code class="inline-code-span">bin</code>으로 바꾸는 함수를 구현해보겠습니다.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Fixpoint</span><span class="color-white"> nat_to_bin (n </span><span class="color-white">:</span><span class="color-white"> nat) </span><span class="color-white">:</span><span class="color-white"> bin </span><span class="color-white">:=</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-white">  match n with</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">O</span><span class="color-white"> </span><span class="color-white">=&gt;</span><span class="color-white"> </span><span class="color-gold">Z</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">|</span><span class="color-white"> </span><span class="color-gold">S</span><span class="color-white"> n&apos; </span><span class="color-white">=&gt;</span><span class="color-white"> incr (nat_to_bin n&apos;)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  end</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(6)">Copy</button></pre><p>역시 아주 간단하게 구현했습니다. <code class="inline-code-span">S</code>를 하나 벗길 때마다 <code class="inline-code-span">incr</code>를 한번씩 하도록 구현했습니다.</p><h2 id="검증2">검증2</h2><p>방금 만든 <code class="inline-code-span">nat_to_bin</code>을 검증해봅시다. 어떤 자연수를 <code class="inline-code-span">nat_to_bin</code>과 <code class="inline-code-span">bin_to_nat</code>을 한번씩 거치면 원래의 수로 돌아오는지 확인해보겠습니다.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gold">Theorem</span><span class="color-white"> nat_bin_nat </span><span class="color-white">:</span><span class="color-white"> forall n </span><span class="color-white">:</span><span class="color-white"> nat</span><span class="color-white">,</span><span class="color-white"> bin_to_nat (nat_to_bin n) </span><span class="color-white">=</span><span class="color-white"> n</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gold">Proof</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">  intros n</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">  induction n as [ </span><span class="color-white">|</span><span class="color-white"> n&apos; </span><span class="color-gold">IHn</span><span class="color-white">&apos;]</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> n = 0 </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">    reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-white">-</span><span class="color-white"> (*</span><span class="color-gray">{-</span><span class="color-gray"> n = S n&apos; </span><span class="color-gray">-}</span><span class="color-white">*)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">    simpl</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">    rewrite bin_to_nat_incr</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">    simpl</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">    rewrite </span><span class="color-gold">IHn</span><span class="color-white">&apos;</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">    reflexivity</span><span class="color-white">.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">  </span><span class="color-gold">Qed</span><span class="color-white">.</span></span></span>
</code><button class="copy-fenced-code" onclick="copy_code_to_clipboard(7)">Copy</button></pre><p><a href="검증1">위</a>에서 증명했던 <code class="inline-code-span">bin_to_nat_incr</code>을 사용했습니다.</p><hr/><div class="align-center"><p><a href="index.html">메인으로 돌아가기</a></p></div><div class="align-left"><p>&lt;&lt; <a href="Chap2-2.html">Chap2-2. Proofs within proofs</a></p></div><div class="align-right"><p>다음 글이 없습니다.</p></div><hr class="footnote-hr"/><div class="mdxt-footnote-cites"><p><div class="footnote-cite"><a id="footnote-cite-0"></a>0. <a href="#footnote-ref-0"> [0]</a> <a href="#footnote-ref-1"> [1]</a> 가장 큰 자릿수를 MSB라고 하고, 가장 작은 자릿수를 LSB라고 합니다. 6을 이진법으로 썼을 때 1010이 된다면, MSB는 1이고 LSB는 0입니다.</div><div class="footnote-cite"><a id="footnote-cite-1"></a>1. <a href="#footnote-ref-2"> [2]</a> Carry가 한국말로 받아올림이 맞나요?</div></p></div><script>/*<![CDATA[*/
const fenced_code_block_contents = ["Inductive bin : Type :=\n  | Z\n  | B0 (n : bin)\n  | B1 (n : bin).", "Fixpoint incr (b: bin) : bin :=\n  match b with\n  | Z => B1 Z\n  | B0 b' => B1 b'\n  | B1 b' => B0 (incr b')\n  end.", "Example test_bin_incr1 : (incr (B1 Z)) = B0 (B1 Z).\nProof.\n  reflexivity.\n  Qed.\n\n Example test_bin_incr2 : (incr (B0 (B1 Z))) = B1 (B1 Z).\nProof.\n  reflexivity.\n  Qed.\n\n Example test_bin_incr3 : (incr (B1 (B1 Z))) = B0 (B0 (B1 Z)).\nProof.\n  reflexivity.\n  Qed.", "Fixpoint bin_to_nat (b: bin) : nat :=\n  match b with\n  | Z => O\n  | B0 b' => 2 * (bin_to_nat b')\n  | B1 b' => 1 + 2 * (bin_to_nat b')\n  end.", "(*{-\n                            incr\n              bin ----------------------> bin\n               |                           |\n    bin_to_nat |                           |  bin_to_nat\n               |                           |\n               v                           v\n              nat ----------------------> nat\n                             S\n-}*)\n\nTheorem bin_to_nat_incr : forall b: bin,\n  bin_to_nat (incr b) = 1 + bin_to_nat b.", "Theorem bin_to_nat_incr : forall b: bin,\n  bin_to_nat (incr b) = 1 + bin_to_nat b.\nProof.\n  intros b.\n  induction b as [ | b0' IHb0'| b1' IHb1'].\n  - (*{- b = Z -}*)\n    reflexivity.\n  - (*{- b = B0 b0' -}*)\n    reflexivity.\n  - (*{- b = B1 b1' -}*)\n    simpl.\n    rewrite add_0_r.\n    rewrite add_0_r.\n    rewrite IHb1'.\n    simpl.\n    assert (H: forall n m : nat, n + S m = S (n + m)).\n    {\n      intros m n.\n      induction m as [ | m' IHm'].\n      - (*{- m = 0 -}*)\n        reflexivity.\n      - (*{- m = S m' -}*)\n        simpl.\n        rewrite <- IHm'.\n        reflexivity.\n    }\n    rewrite H.\n    reflexivity.\n  Qed.", "Fixpoint nat_to_bin (n : nat) : bin :=\n  match n with\n  | O => Z\n  | S n' => incr (nat_to_bin n')\n  end.", "Theorem nat_bin_nat : forall n : nat, bin_to_nat (nat_to_bin n) = n.\nProof.\n  intros n.\n  induction n as [ | n' IHn'].\n  - (*{- n = 0 -}*)\n    reflexivity.\n  - (*{- n = S n' -}*)\n    simpl.\n    rewrite bin_to_nat_incr.\n    simpl.\n    rewrite IHn'.\n    reflexivity.\n  Qed."];

function copy_code_to_clipboard(index) {
    navigator.clipboard.writeText(fenced_code_block_contents[index]);
}/*]]>*/</script>
        <a id="bottom"></a>
    </article>




    <footer class="markdown">
<p><br/></p><p><br/></p><hr/><div class="align-center"><p>2021 ~ 2022 (c) Baehyunsol</p><p>Powered by <a href="https://github.com/baehyunsol/MDxt">MDxt</a></p></div>
    </footer>


    <script src="colors.js"></script>

    
    <script src="nav.js"></script>
    
<script src="collapsible_tables.js"></script></body>

</html>